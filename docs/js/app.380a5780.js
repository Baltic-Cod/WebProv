(function(e){function t(t){for(var r,a,c=t[0],s=t[1],u=t[2],l=0,p=[];l<c.length;l++)a=c[l],o[a]&&p.push(o[a][0]),o[a]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);d&&d(t);while(p.length)p.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,c=1;c<n.length;c++){var s=n[c];0!==o[s]&&(r=!1)}r&&(i.splice(t--,1),e=a(a.s=n[0]))}return e}var r={},o={app:0},i=[];function a(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/WebProv/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var d=s;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"021e":function(e,t,n){},"0526":function(e,t,n){"use strict";var r=n("cc01"),o=n.n(r);o.a},"510d":function(e,t,n){"use strict";var r=n("735a"),o=n.n(r);o.a},"5c0b":function(e,t,n){"use strict";var r=n("5e27"),o=n.n(r);o.a},"5e27":function(e,t,n){},"60e7":function(e,t,n){"use strict";var r=n("8ab4"),o=n.n(r);o.a},"61c1":function(e,t,n){},"735a":function(e,t,n){},"7d07":function(e,t,n){"use strict";var r=n("61c1"),o=n.n(r);o.a},"8ab4":function(e,t,n){},9098:function(e,t,n){},ad75:function(e,t,n){},ae4d:function(e,t,n){"use strict";var r=n("9098"),o=n.n(r);o.a},cc01:function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var r=n("2b0e"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("visualizer")],1)},i=[],a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("d3",{ref:"d3",attrs:{height:e.height,width:e.width,links:e.links,nodes:e.nodes,force:"",arrows:"",drag:"",hulls:"","hull-dblclick":e.hullDblclick}}),n("svg",{staticStyle:{position:"absolute",top:"0",left:"0","pointer-events":"none"},attrs:{height:e.height,width:e.width}},[n("line",{attrs:{x1:e.lineStart?e.lineStart.x:0,y1:e.lineStart?e.lineStart.y:0,x2:e.lineEnd?e.lineEnd.x:0,y2:e.lineEnd?e.lineEnd.y:0,"stroke-dasharray":"4",stroke:"black"}})]),n("div",{staticClass:"overlay"},[n("search",{staticClass:"search overlay-child",attrs:{items:e.searchItems},on:{open:e.openResult,dependency:e.showProvenanceGraph}}),n("div",{staticStyle:{flex:"1"}}),n("b-button",{staticClass:"clear-button overlay-child",attrs:{type:"is-text"},on:{click:e.addNode}},[e._v("\n      Add Node\n    ")]),n("b-button",{staticClass:"clear-button overlay-child",attrs:{type:"is-text"},on:{click:e.clearNodes}},[e._v("\n      Reset\n    ")]),n("div",{staticClass:"cards overlay-child"},[n("prov-legend",e._b({},"prov-legend",e.legendProps,!1)),n("div",{staticClass:"spacer"}),n("models-card",{attrs:{models:e.models}}),n("div",{staticClass:"spacer"}),e.currentRelationship?n("card-select",{attrs:{title:"Relationship",value:e.currentRelationship,options:e.possibleRelationships},on:{input:e.changeRelationship,close:e.cancelRelationshipSelection,delete:e.deleteRelationship}}):e._e(),n("div",{staticClass:"spacer"}),e.selectedNode?n("form-card",{attrs:{title:"Node Information",fields:e.nodeFields[e.selectedNode.type],node:e.selectedNode},on:{close:e.cancelNodeTypeSelection,delete:e.deleteNode,input:e.onNodeChange}}):e._e()],1)],1)],1)},c=[],s=n("768b"),u=(n("8615"),n("96cf"),n("3b8d")),d=n("75fc"),l=(n("6762"),n("2fdb"),n("cebc")),p=(n("ac6a"),n("d225")),f=n("b0b4"),h=n("308d"),v=n("6bb5"),y=n("4e2b"),m=n("9ab4"),b={"generated-by":{color:"blue",source:"entity",target:"activity"},"derived-from":{color:"blue",source:"entity",target:"entity"},used:{color:"blue",source:"activity",target:"entity"},"used-for-calibration":{color:"red",source:"activity",target:"entity"},"used-for-validation":{color:"green",source:"activity",target:"entity"}},g="rgb(22, 89, 136)",x="rgb(55, 130, 33)",k="rgb(130, 55, 33)",_=40,w=10,O="rgb(0, 0, 0)",j=50,C=(n("456d"),{used:"Used","used-for-validation":"Used for validation","used-for-calibration":"Used for calibration","derived-from":"Derived from","generated-by":"Generated by"}),N=(Object.keys(C),{"model-building-activity":{"wet-lab-data":["used-for-validation","used-for-calibration"],"simulation-data":["used-for-validation","used-for-calibration"],model:["used"]},model:{model:[{relationship:"derived-from",single:!0}],"model-building-activity":[{relationship:"generated-by",single:!0}]},"model-exploration-activity":{model:[{relationship:"used",single:!0}]},"simulation-data":{"model-building-activity":[{relationship:"generated-by",single:!0}],"model-exploration-activity":[{relationship:"generated-by",single:!0}]},"wet-lab-data":{}}),I={model:"Model","model-building-activity":"Model Building Activity","model-exploration-activity":"Model Exploration Activity","simulation-data":"Simulation Data","wet-lab-data":"Wet Lab Data"},R=Object.keys(I),S=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("card",{attrs:{title:"Prov DM Legend"}},[n("div",{staticClass:"legend"},[e._l(["entity","activity"],function(t){return n("div",{key:t,staticClass:"legend--item"},[n("d3",{attrs:{height:25,width:100}},[n("node",{staticClass:"legend--block",attrs:{rx:"entity"===t?e.nodeRadius:0,id:t,size:25,stroke:e.nodeOutline}})],1),n("div",{staticClass:"legend--text"},[e._v(e._s(e._f("uppercase")(t)))])],1)}),e._l(e.relationshipLegend,function(t){return n("div",{key:t.relationship,staticClass:"legend--item"},[n("d3",{attrs:{height:25,width:100,arrows:"","arrow-size":5}},[n("node",{staticClass:"legend--block",attrs:{rx:t.sourceRadius,id:"one",size:25,stroke:e.nodeOutline}}),n("relationship",{attrs:{source:"one",target:"two",color:t.color}}),n("node",{staticClass:"legend--block",attrs:{rx:t.targetRadius,id:"two",size:25,x:75,stroke:e.nodeOutline}})],1),n("div",{staticClass:"legend--text"},[e._v(e._s(t.relationship))])],1)})],2)])},E=[],L=(n("c5f6"),n("ffc1"),n("60a3")),M=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"fade"}},[n("div",{staticClass:"helper card flip-horizontal-bottom"},[e._t("header",[e.title?n("div",{staticClass:"card-header"},[n("p",{staticClass:"card-header-title"},[e._v("\n          "+e._s(e.title)+"\n        ")]),n("a",{staticClass:"card-header-icon"},[e.closeable?n("b-icon",{attrs:{icon:"close",size:"is-small"},nativeOn:{click:function(t){return e.$emit("close")}}}):e._e()],1)]):e._e()]),n("div",{staticClass:"card-content"},[n("div",{staticClass:"content information"},[e._t("default")],2)]),n("footer",{staticClass:"card-footer"},[e._t("footer")],2)],2)])},T=[],$=r["default"].extend({props:{title:String,noCollapse:Boolean,closeable:Boolean}}),q=$,D=(n("eb9d"),n("2877")),A=Object(D["a"])(q,M,T,!1,null,"58ba9557",null),G=A.exports,P=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("svg",{ref:"svg",staticClass:"svg",attrs:{height:e.height,width:e.width}},[e._t("default")],2)},z=[],W=(n("6c7b"),n("04ff"),n("5698")),B=n("7618");n("5df3"),n("f400");function H(e){return function(){return e}}function F(){return 1e-6*(Math.random()-.5)}function K(e){return e.index}function U(e,t){var n=e.get(t);if(!n)throw new Error("missing: "+t);return n}var X=function(e){var t,n,r,o,i,a=K,c=d,s=H(30),u=1;function d(e){return 1/Math.min(o[e.source.index],o[e.target.index])}function l(r){for(var o=0,a=e.length;o<u;++o)for(var c,s,d,l,p,f,h,v=0;v<a;++v)c=e[v],s=c.source,d=c.target,l=d.x+d.width+d.vx-s.x-s.vx||F(),p=d.y+d.vy-s.y-s.vy||F(),f=Math.sqrt(l*l+p*p),f=(f-n[v])/f*r*t[v],l*=f,p*=f,d.vx-=l*(h=i[v]),d.vy-=p*h,s.vx+=l*(h=1-h),s.vy+=p*h}function p(){if(r){var c,s,u=r.length,d=e.length,l=new Map(r.map(function(e,t){return[a(e,t,r),e]}));for(c=0,o=new Array(u);c<d;++c)s=e[c],s.index=c,"object"!==Object(B["a"])(s.source)&&(s.source=U(l,s.source)),"object"!==Object(B["a"])(s.target)&&(s.target=U(l,s.target)),o[s.source.index]=(o[s.source.index]||0)+1,o[s.target.index]=(o[s.target.index]||0)+1;for(c=0,i=new Array(d);c<d;++c)s=e[c],i[c]=o[s.source.index]/(o[s.source.index]+o[s.target.index]);t=new Array(d),f(),n=new Array(d),h()}}function f(){if(r)for(var n=0,o=e.length;n<o;++n)t[n]=+c(e[n],n,e)}function h(){if(r)for(var t=0,o=e.length;t<o;++t)n[t]=+s(e[t],t,e)}return null==e&&(e=[]),l.initialize=function(e){r=e,p()},l.links=function(t){return arguments.length?(e=t,p(),l):e},l.id=function(e){return arguments.length?(a=e,l):a},l.iterations=function(e){return arguments.length?(u=+e,l):u},l.strength=function(e){return arguments.length?(c="function"===typeof e?e:H(+e),f(),l):c},l.distance=function(e){return arguments.length?(s="function"===typeof e?e:H(+e),h(),l):s},l},J=(n("4f7f"),n("1c4c"),n("c7c6"),n("ac4d"),n("8a81"),n("80ef")),V=function(e){return e.x},Z=function(e){return e.y},Y=function(e){return function(){return e}},Q=function(){return 1e-6*(Math.random()-.5)},ee=function(e){return void 0!==e},te=25,ne=function(){var e,t,n,r,o=[],i=Y(-30),a=1,c=1/0,s=.81,u=[];function d(r){n=r;var o=Object(J["a"])(e,V,Z).visitAfter(function(e){return p(e)});e.forEach(function(e){t=e,o.visit(function(e,t,n,r){return f(e,t,n,r)})})}function l(){e&&(r=new Array(e.length),u=new Array(e.length),e.forEach(function(e){r[e.index]=i(),u[e.index]={},o.forEach(function(t){u[e.index][t]=r[e.index]+(t===e.hullGroup?te:-te)})}))}function p(e){var t=0,n=0,o={};if(Array.isArray(e)){var i=0,a=0,c=!0,s=!1,u=void 0;try{for(var d,l=function(){var e=d.value;if(!e)return"continue";var r=Math.abs(e.value);if(!r)return"continue";t+=e.value,n+=r,i+=r*e.x,a+=r*e.y,Object.keys(e.groups).map(function(t){void 0===o[t]&&(o[t]=0),o[t]+=e.groups[t]})},p=e[Symbol.iterator]();!(c=(d=p.next()).done);c=!0)l()}catch(h){s=!0,u=h}finally{try{c||null==p.return||p.return()}finally{if(s)throw u}}e.x=i/n,e.y=a/n}else{var f=e;f.x=f.data.x,f.y=f.data.y;do{t+=r[f.data.index],void 0!==f.data.hullGroup&&(void 0===o[f.data.hullGroup]&&(o[f.data.hullGroup]=0),o[f.data.hullGroup]++),f=f.next}while(f)}e.value=t,e.groups=o}function f(e,o,i,d){if(!e.value)return!0;var l=e.data,p=e.x-(t.x+t.width/2),f=e.y-(t.y+t.height/2),h=d-o,v=p*p+f*f;if(h*h/v<s){if(v<c){0===p&&(p=Q(),v+=p*p),0===f&&(f=Q(),v+=f*f),v<a&&(v=Math.sqrt(a*v));var y=e.value;if(void 0!==t.hullGroup){var m=e.groups;Object.keys(m).forEach(function(e){var n=m[e];t.hullGroup===+e?y=Math.min(0,y+te*n):y-=te*n})}y*=-Math.tanh(5e-6*(v-Math.pow(700,2))),t.vx+=p*y*n/v,t.vy+=f*y*n/v}return!0}if(!(Array.isArray(e)||v>=c)){(l!==t||e.next)&&(0===p&&(p=Q(),v+=p*p),0===f&&(f=Q(),v+=f*f),v<a&&(v=Math.sqrt(a*v)));do{l!==t&&(h=void 0!==t.hullGroup?u[l.index][t.hullGroup]*n/v:r[l.index]*n/v,t.vx+=p*h,t.vy+=f*h),e=e.next}while(e)}}return d.initialize=function(t){e=t,o=Array.from(new Set(e.map(function(e){return e.hullGroup}))).filter(ee),l()},d.strength=function(e){return void 0===e?i:("function"!==typeof e&&(e=Y(+e)),i=e,l(),d)},d.distanceMin=function(e){return void 0===e?Math.sqrt(a):(a=e*e,d)},d.distanceMax=function(e){return void 0===e?Math.sqrt(c):(c=e*e,d)},d.theta=function(e){return void 0===e?Math.sqrt(s):(s=e*e,d)},d},re=(n("a481"),n("6b54"),n("7f7f"),function(e){var t={},n=!0,r=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var c=i.value;t[c.id]=c}}catch(s){r=!0,o=s}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return t});function oe(e,t){return Object(L["e"])(e,t)}function ie(e,t){switch(e.type){case"wet-lab-data":return e.name||"None";case"model-building-activity":return"MBA";case"simulation-data":return e.name||"None";case"model-exploration-activity":return"MEA";case"model":if(void 0===e.modelId)return"None";var n="M".concat(e.modelId);void 0===e.version||1===e.version||(2===e.version?n+="'":n+="v".concat(e.version));var r=t[e.modelId];return r?n+" (".concat(r.bibInformation,")"):n}}var ae=function(e,t,n){var o=n.doConnection,i=void 0===o||o;e.connections||r["default"].set(e,"connections",[]);var a=N[e.type],c=a[t.type];if(!c)return!1;if(!n.type)return!1;var s=c.some(function(e){return"string"===typeof e?e===n.type:e.relationship===n.type});return!!s&&(i&&e.connections.push({id:de(),type:n.type,targetId:t.id}),!0)},ce=function(e,t,n){return ae(e,t,{doConnection:!1,type:n})},se=function(e,t){for(var n=Object.keys(e),r=function(){for(var t=0,r=n;t<r.length;t++){var o=r[t],i=e[o];"remove"!==i&&window.removeEventListener(o,i)}},o=0,i=n;o<i.length;o++){var a=i[o],c=e[a];"remove"===c&&(e[a]=r),window.addEventListener(a,c,t)}return r},ue=function(e,t){var n=N[e],r=n[t];if(r){var o=r[0];return"string"===typeof o?o:o.relationship}},de=function(){return"A"+Math.random().toString().substr(2,9)},le={name:"type",type:"string",options:R},pe={name:"modelId",type:"number"},fe={model:[le,pe,{name:"version",type:"number"}],"model-building-activity":[le,pe],"model-exploration-activity":[le,pe],"simulation-data":[le,pe,{name:"name",type:"string"}],"wet-lab-data":[le,pe,{name:"name",type:"string"},{name:"information",type:"string",multiple:!0}]};function he(e){return e.charAt(0).toUpperCase()+e.substring(1)}function ve(e){return he(e.replace(/([A-Z]+)/g," $1").replace(/([A-Z][a-z])/g," $1"))}function ye(e,t,n){var r=e[t];return r||n}var me=W["h"](W["i"]),be=0,ge=function(e){function t(){var e;return Object(p["a"])(this,t),e=Object(h["a"])(this,Object(v["a"])(t).apply(this,arguments)),e.isD3=!0,e.addedLinks=[],e.addedNodes=[],e.selection=null,e.curve=W["f"]().curve(W["a"].tension(.85)),e}return Object(y["a"])(t,e),Object(f["a"])(t,[{key:"fill",value:function(e){return me(""+e.group)}},{key:"addLink",value:function(e){this.addedLinks.push(Object(l["a"])({},e,{color:e.color?e.color:this.defaultStrokeColor}))}},{key:"addNode",value:function(e){this.allNodes.push(e)}},{key:"calcWidth",value:function(e){return 10+(void 0===e?0:8*e.length)}},{key:"convexHulls",value:function(){var e={},t=this.hullOffset;this.allNodes.forEach(function(n){if(void 0!==n.hullGroup){var r=n.hullGroup,o=e[r]||(e[r]={points:[],nodes:[]});o.nodes.push(n),o.points.push([n.x-t,n.y-t]),o.points.push([n.x+n.width+t,n.y-t]),o.points.push([n.x+n.width+t,n.y+n.height+t]),o.points.push([n.x-t,n.y+n.height+t])}});for(var n=[],r=0,o=Object.keys(e);r<o.length;r++){var i=o[r],a=W["g"](e[i].points);a&&n.push({group:Number.parseInt(i,10),nodes:e[i].nodes,path:a})}return n}},{key:"applyNode",value:function(e){var t=this;e.attr("id",function(e){return e.id}).attr("width",function(e){return e.width}).attr("height",function(e){return e.height}).attr("fill",function(e){return"white"}).style("stroke-width",3).attr("rx",function(e){return e.rx}).attr("x",function(e){return t.force?0:e.x}).attr("y",function(e){return t.force?0:e.y}).style("stroke",function(e){return e.stroke})}},{key:"applyText",value:function(e){e.filter(function(e){return void 0!==e.text}).attr("id",function(e){return"text-".concat(e.id)}).attr("x",function(e){return 4*e.text.length+5}).attr("y",function(e){return e.height/2+5}).style("stroke-width",0).style("font-family","monospace").style("pointer-events","none").style("text-anchor","middle").style("font-size","12px").text(function(e){return e.text})}},{key:"doRender",value:function(){var e=this,t=W["j"](this.$refs.svg);t.selectAll("*").remove();var n=function(e){return function(t){e&&e(t)}},r=null;this.hulls&&(r=t.append("g").attr("class","hulls").selectAll("path").data(this.convexHulls()).enter().append("path").attr("class","hull").attr("d",function(t){return e.curve(t.path)}).style("fill",this.fill).style("opacity",.5),r.on("click",n(this.hullClick)),r.on("dblclick",n(this.hullDblclick)));var o=null;this.force&&(o=W["e"](this.allNodes).force("link",X(this.allLinks).id(function(e){return""+e.id}).strength(.3)).velocityDecay(.5).force("charge",ne().strength(-1e3)).force("center",W["d"](this.width/2,this.height/2)));var i=this.allLinks.map(function(e){var t=e.color;return t});this.arrows&&t.append("svg:defs").selectAll("marker").data(i).enter().append("svg:marker").attr("id",function(e){return"".concat(be,"-").concat(e)}).attr("viewBox","0 -5 10 10").attr("refX",10).attr("refY",0).attr("markerWidth",this.arrowSize).attr("markerHeight",this.arrowSize).attr("orient","auto").append("svg:path").style("fill",function(e){return e}).attr("d","M0,-5L10,0L0,5");var a=t.append("g").attr("stroke-opacity",.6).selectAll("line").data(this.allLinks).join("line").attr("stroke-width",function(e){return 3}).attr("stroke",function(e){return e.color});if(a.on("click",function(e){e.onDidClick&&e.onDidClick(W["c"])}),!o){var c=function(t,n){return function(r){var o=e.nodeLookup[r[n]],i="y"===t?o.height/2:"source"===n?o.width:0;return o[t]+i}};a.attr("x1",c("x","source")).attr("y1",c("y","source")).attr("x2",c("x","target")).attr("y2",c("y","target"))}this.arrows&&a.attr("marker-end",function(e){return"url(#".concat(be,"-").concat(e.color,")")});var s=this.selection=t.append("g").attr("stroke","#fff").selectAll(".node").data(this.allNodes).join("g").attr("class","node");this.applyNode(s.append("rect"));var u=function(e){return function(t){var n=t[e];n&&n(W["c"])}};if(s.on("click",u("onDidClick")),s.on("dblclick",u("onDidDblclick")),s.on("mousedown",u("onDidMousedown")),s.on("contextmenu",u("onDidRightClick")),this.drag){var d=W["b"]().on("start",function(e){o&&!W["c"].active&&o.alphaTarget(.3).restart(),e.fx=e.x,e.fy=e.y}).on("drag",function(e){e.fx=W["c"].x,e.fy=W["c"].y}).on("end",function(e){o&&!W["c"].active&&o.alphaTarget(0),e.fx=null,e.fy=null});s.call(d)}this.applyText(s.append("text")),s.append("text").filter(function(e){return void 0!==e.actionText}).attr("x",function(e){return 3*e.actionText.length-2}).attr("y",function(e){return e.height+12}).style("stroke-width",0).style("font-family","monospace").style("text-anchor","middle").attr("class","action").style("font-size","10px").text(function(e){return e.actionText}).on("click",u("onDidActionClick")),o&&o.on("tick",function(){r&&!r.empty()&&r.data(e.convexHulls()).attr("d",function(t){return e.curve(t.path)}),a.attr("x1",function(e){var t=e.source;return t.x}).attr("y1",function(e){var t=e.source;return t.y+t.height/2}).attr("x2",function(t){var n=t.target;return n.x+e.calcWidth(n.text)}).attr("y2",function(e){var t=e.target;return t.y+t.height/2}),s.attr("transform",function(e){return"translate(".concat(e.x,", ").concat(e.y,")")})}),be++}},{key:"setStrokeColor",value:function(e,t){e.stroke=t,this.selection&&this.selection.select("#".concat(e.id)).style("stroke",function(e){return e.stroke})}},{key:"replaceNode",value:function(e){this.nodes.forEach(function(t){t.id===e.id&&Object.assign(t,e)}),this.selection&&(this.applyNode(this.selection.select("#".concat(e.id))),this.applyText(this.selection.select("#text-".concat(e.id))))}},{key:"mounted",value:function(){this.doRender()}},{key:"reRenderNodes",value:function(){this.doRender()}},{key:"reRenderLinks",value:function(){this.doRender()}},{key:"allNodes",get:function(){return[].concat(Object(d["a"])(this.addedNodes),Object(d["a"])(this.nodes))}},{key:"allLinks",get:function(){var e=this,t=[].concat(Object(d["a"])(this.links),Object(d["a"])(this.addedLinks));return t.map(function(t){return Object(l["a"])({},t,{color:t.color?t.color:e.defaultStrokeColor})})}},{key:"nodeLookup",get:function(){return re(this.allNodes)}}]),t}(L["d"]);m["__decorate"]([Object(L["c"])({type:String,default:"#000"})],ge.prototype,"defaultStrokeColor",void 0),m["__decorate"]([Object(L["c"])({type:Boolean,default:!1})],ge.prototype,"arrows",void 0),m["__decorate"]([Object(L["c"])({type:Boolean,default:!1})],ge.prototype,"force",void 0),m["__decorate"]([Object(L["c"])({type:Boolean,default:!1})],ge.prototype,"drag",void 0),m["__decorate"]([Object(L["c"])({type:Boolean,default:!1})],ge.prototype,"hulls",void 0),m["__decorate"]([Object(L["c"])({type:Number,default:100})],ge.prototype,"height",void 0),m["__decorate"]([Object(L["c"])({type:Number,default:100})],ge.prototype,"width",void 0),m["__decorate"]([Object(L["c"])({type:Number,default:6})],ge.prototype,"arrowSize",void 0),m["__decorate"]([Object(L["c"])({type:Number,default:40})],ge.prototype,"hullOffset",void 0),m["__decorate"]([Object(L["c"])({type:Array,default:function(){return[]}})],ge.prototype,"nodes",void 0),m["__decorate"]([Object(L["c"])({type:Array,default:function(){return[]}})],ge.prototype,"links",void 0),m["__decorate"]([Object(L["c"])({type:Function,required:!1})],ge.prototype,"hullClick",void 0),m["__decorate"]([Object(L["c"])({type:Function,required:!1})],ge.prototype,"hullDblclick",void 0),m["__decorate"]([Object(L["c"])({type:Function,required:!1})],ge.prototype,"nodeDblclick",void 0),m["__decorate"]([Object(L["c"])({type:Function,required:!1})],ge.prototype,"actionClick",void 0),m["__decorate"]([oe("nodes")],ge.prototype,"reRenderNodes",null),m["__decorate"]([oe("links")],ge.prototype,"reRenderLinks",null),ge=m["__decorate"]([L["a"]],ge);var xe=ge,ke=xe,_e=(n("d8d4"),Object(D["a"])(ke,P,z,!1,null,"4d61599b",null)),we=_e.exports,Oe=function(e){return!0===e.isD3},je=function(e){function t(){return Object(p["a"])(this,t),Object(h["a"])(this,Object(v["a"])(t).apply(this,arguments))}return Object(y["a"])(t,e),Object(f["a"])(t,[{key:"mounted",value:function(){if(!Oe(this.$parent))throw Error("parent must be D3");this.$parent.addLink({target:this.target,source:this.source,color:this.color})}},{key:"render",value:function(){return null}}]),t}(L["d"]);m["__decorate"]([Object(L["c"])({type:String,required:!0})],je.prototype,"target",void 0),m["__decorate"]([Object(L["c"])({type:String,required:!0})],je.prototype,"source",void 0),m["__decorate"]([Object(L["c"])({type:String,required:!1})],je.prototype,"color",void 0),je=m["__decorate"]([L["a"]],je);var Ce,Ne,Ie=je,Re=Ie,Se=Object(D["a"])(Re,Ce,Ne,!1,null,"ebce97d6",null),Ee=Se.exports,Le=function(e){function t(){return Object(p["a"])(this,t),Object(h["a"])(this,Object(v["a"])(t).apply(this,arguments))}return Object(y["a"])(t,e),Object(f["a"])(t,[{key:"mounted",value:function(){if(!Oe(this.$parent))throw Error("parent must be D3");var e=this;this.$parent.addNode({id:this.id,rx:this.rx,x:this.x,y:this.y,text:this.text,height:this.size,width:this.size,stroke:this.stroke,vx:0,vy:0,index:0,onDidClick:function(){e.$emit("click",this)},onDidMousedown:function(){e.$emit("mousedown",this)},onDidDblclick:function(){e.$emit("dblclick",this)},onDidRightClick:function(){e.$emit("contextmenu",this)}})}},{key:"render",value:function(){return null}}]),t}(L["d"]);m["__decorate"]([Object(L["c"])({type:String,required:!0})],Le.prototype,"id",void 0),m["__decorate"]([Object(L["c"])({type:Number,required:!0})],Le.prototype,"rx",void 0),m["__decorate"]([Object(L["c"])({type:Number,default:0})],Le.prototype,"x",void 0),m["__decorate"]([Object(L["c"])({type:Number,default:0})],Le.prototype,"y",void 0),m["__decorate"]([Object(L["c"])({type:Number,required:!0})],Le.prototype,"size",void 0),m["__decorate"]([Object(L["c"])({type:String,default:""})],Le.prototype,"text",void 0),m["__decorate"]([Object(L["c"])({type:String,required:!0})],Le.prototype,"stroke",void 0),Le=m["__decorate"]([L["a"]],Le);var Me,Te,$e=Le,qe=$e,De=(n("0526"),Object(D["a"])(qe,Me,Te,!1,null,"8ea56720",null)),Ae=De.exports,Ge=function(e){function t(){return Object(p["a"])(this,t),Object(h["a"])(this,Object(v["a"])(t).apply(this,arguments))}return Object(y["a"])(t,e),Object(f["a"])(t,[{key:"relationshipLegend",get:function(){var e=this;return Object.entries(b).map(function(t){var n=Object(s["a"])(t,2),r=n[0],o=n[1];return Object(l["a"])({},o,{sourceRadius:"entity"===o.source?e.nodeRadius:0,targetRadius:"entity"===o.target?e.nodeRadius:0,relationship:r})})}}]),t}(L["d"]);m["__decorate"]([Object(L["c"])({type:Number,required:!0})],Ge.prototype,"nodeRadius",void 0),m["__decorate"]([Object(L["c"])({type:String,required:!0})],Ge.prototype,"nodeOutline",void 0),Ge=m["__decorate"]([Object(L["a"])({components:{Node:Ae,Card:G,Relationship:Ee,D3:we},filters:{uppercase:he}})],Ge);var Pe=Ge,ze=Pe,We=(n("ae4d"),Object(D["a"])(ze,S,E,!1,null,"1af83e90",null)),Be=We.exports,He=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("card",{scopedSlots:e._u([{key:"header",fn:function(){return[n("b-field",{staticStyle:{margin:"1.5rem 1.5rem 0"}},[n("b-input",{ref:"input",attrs:{placeholder:"Search...",type:"search",icon:"magnify",expanded:""},on:{input:e.checkEmpty},nativeOn:{keydown:function(t){return e.checkEnter(t)}},model:{value:e.searchText,callback:function(t){e.searchText=t},expression:"searchText"}}),n("p",{staticClass:"control"},[n("button",{staticClass:"button is-primary",on:{click:e.search}},[e._v("\n          Search\n        ")])])],1)]},proxy:!0},{key:"footer",fn:function(){return[e.results.length?n("a",{staticClass:"card-footer-item",attrs:{href:"#"},on:{click:e.clear}},[e._v("Clear")]):e._e()]},proxy:!0}])},[n("div",{staticClass:"results"},e._l(e.results,function(t,r){return n("div",{key:r},[n("div",{staticStyle:{display:"flex"}},[n("div",[n("h4",{staticClass:"result--title"},[e._v(e._s(t.title))]),n("h6",{staticClass:"result--type"},[e._v(e._s(void 0===t.model?"No Model":"Model "+t.model))]),n("p",{staticClass:"result--extra"},[e._v(e._s(e._f("format")(t.information)))])]),n("div",{staticStyle:{flex:"1"}}),n("div",{staticStyle:{display:"flex"}},[n("b-tooltip",{attrs:{label:"Show Provenance Graph",position:"is-left"}},[n("b-button",{staticStyle:{transform:"rotate(-90deg)"},attrs:{type:"is-text","icon-right":"call-split"},on:{click:function(n){return e.$emit("dependency",t)}}})],1),n("b-tooltip",{attrs:{label:"Show Entire Model",position:"is-left"}},[n("b-button",{attrs:{type:"is-text","icon-right":"arrow-expand-all"},on:{click:function(n){return e.$emit("open",t)}}})],1)],1)]),r!==e.results.length-1?n("hr",{staticClass:"result--break"}):e._e()])}),0)])},Fe=[],Ke=(n("386d"),n("ffe7")),Ue=n.n(Ke),Xe={keys:["information","title"]},Je=function(e,t){if(""===t.trim())return e;var n=new Ue.a(e,Xe);return n.search(t)},Ve=function(e){function t(){var e;return Object(p["a"])(this,t),e=Object(h["a"])(this,Object(v["a"])(t).apply(this,arguments)),e.results=[],e.searchText="",e}return Object(y["a"])(t,e),Object(f["a"])(t,[{key:"checkEnter",value:function(e){13===e.which&&this.search()}},{key:"checkEmpty",value:function(){""===this.searchText&&(this.results=[])}},{key:"search",value:function(){var e=this.$loading.open({container:this.$el});setTimeout(function(){return e.close()},500),this.results=Je(this.items,this.searchText)}},{key:"clear",value:function(){this.results=[],this.searchText="",this.$refs.input.focus()}}]),t}(L["d"]);m["__decorate"]([Object(L["c"])({type:Array,required:!0})],Ve.prototype,"items",void 0),Ve=m["__decorate"]([Object(L["a"])({components:{Card:G},filters:{format:function(e){return e.join(" • ")}}})],Ve);var Ze=Ve,Ye=Ze,Qe=(n("510d"),Object(D["a"])(Ye,He,Fe,!1,null,"eb498152",null)),et=Qe.exports,tt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("card",{attrs:{title:e.title},scopedSlots:e._u([{key:"footer",fn:function(){return[n("a",{staticClass:"card-footer-item",on:{click:function(t){return e.$emit("close")}}},[e._v("Close")]),n("a",{staticClass:"card-footer-item",on:{click:function(t){return e.$emit("delete")}}},[e._v("Delete")])]},proxy:!0}])},e._l(e.fields,function(t,r){return n("b-field",{key:r,attrs:{label:e._f("wordCase")(t.name)}},[t.options?n("b-select",{attrs:{value:e.node[t.name],expanded:""},on:{input:function(n){return e.onInput(t.name,t.type,n)}}},e._l(t.options,function(t){return n("option",{key:t,domProps:{value:t}},[e._v(e._s(t))])}),0):t.multiple?n("div",[e._l(e.node[t.name],function(r,o){return n("div",{key:t.name+"-"+o,staticStyle:{display:"flex"}},[n("b-field",[n("b-input",{attrs:{placeholder:"Key",value:r[0]},on:{input:function(n){return e.update(t.name,r,0,n)}}})],1),n("div",{staticStyle:{flex:"0 0 10px"}}),n("b-field",[n("b-input",{attrs:{placeholder:"Value",value:r[1]},on:{input:function(n){return e.update(t.name,r,1,n)}}}),n("p",{staticClass:"control"},[n("button",{staticClass:"button is-primary",on:{click:function(n){return e.deleteField(e.node[t.name],t.name,o)}}},[n("b-icon",{attrs:{icon:"close"}})],1)])],1)],1)}),n("b-button",{staticClass:"is-primary",on:{click:function(n){return e.addField(t.name)}}},[e._v("\n        Add Field\n      ")])],2):n("b-input",{attrs:{type:t.type,value:e.node[t.name]},on:{input:function(n){return e.onInput(t.name,t.type,n)}}})],1)}),1)},nt=[],rt=function(e){function t(){return Object(p["a"])(this,t),Object(h["a"])(this,Object(v["a"])(t).apply(this,arguments))}return Object(y["a"])(t,e),Object(f["a"])(t,[{key:"update",value:function(e,t,n,r){t[n]=r,this.$emit("input",this.node,e)}},{key:"addField",value:function(e){var t=this.node[e];"string"!==typeof t&&"number"!==typeof t&&(void 0===t&&(t=[],L["d"].set(this.node,e,t)),t.push(["",""]),this.$emit("input",this.node,e))}},{key:"deleteField",value:function(e,t,n){L["d"].set(this.node,t,e.filter(function(e,t){return t!==n}))}},{key:"onInput",value:function(e,t,n){var r="string"===t?n:""===n?void 0:+n;L["d"].set(this.node,e,r),this.$emit("input",this.node,e)}}]),t}(L["d"]);m["__decorate"]([Object(L["c"])({type:Array,required:!0})],rt.prototype,"fields",void 0),m["__decorate"]([Object(L["c"])({type:Object,required:!0})],rt.prototype,"node",void 0),m["__decorate"]([Object(L["c"])({type:String,required:!0})],rt.prototype,"title",void 0),rt=m["__decorate"]([Object(L["a"])({components:{Card:G},filters:{wordCase:ve}})],rt);var ot=rt,it=ot,at=Object(D["a"])(it,tt,nt,!1,null,null,null),ct=at.exports,st=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("card",{scopedSlots:e._u([{key:"footer",fn:function(){return[n("a",{staticClass:"card-footer-item",on:{click:e.addModel}},[e._v("Add Model")])]},proxy:!0}])},e._l(e.models,function(t,r){return n("div",{key:r},[n("div",{staticStyle:{display:"flex"}},[n("h4",{staticClass:"model--title"},[e._v("Model "+e._s(t.modelId))]),n("div",{staticStyle:{flex:"1"}}),n("b-button",{attrs:{rounded:"",type:"is-text"},on:{click:function(t){return e.clickChevron(r)}}},[n("b-icon",{attrs:{icon:e.expanded[r]?"chevron-up":"chevron-down"}})],1)],1),e.expanded[r]?n("div",[n("b-field",{staticClass:"field",attrs:{label:"Model"}},[n("b-input",{attrs:{type:"number",value:t.modelId},on:{input:function(t){return e.setModel(r,t)}}})],1),n("b-field",{staticClass:"field",attrs:{label:"Source"}},[n("b-input",{attrs:{value:t.bibInformation},on:{input:function(t){return e.setBibInformation(r,t)}}})],1),n("b-button",{staticStyle:{"margin-top":"5px"},attrs:{type:"is-primary",outlined:""},on:{click:function(t){return e.deleteModel(r)}}},[e._v("\n        Delete \n      ")])],1):e._e(),r!==e.models.length-1?n("hr",{staticClass:"result--break"}):e._e()])}),0)},ut=[],dt={id:de(),modelId:1,name:"Wx_7",type:"wet-lab-data",information:[["Cell line","Xenopus egg extract"]]},lt={id:de(),modelId:1,name:"W1_1",type:"wet-lab-data",information:[["Cell line","Xenopus egg extract"]]},pt={id:de(),modelId:1,name:"W1_2",type:"wet-lab-data",information:[["Cell line","Xenopus egg extract"]]},ft={id:de(),modelId:1,type:"model-building-activity",connections:[{id:de(),targetId:dt.id,type:"used-for-calibration"},{id:de(),targetId:lt.id,type:"used-for-calibration"},{id:de(),targetId:pt.id,type:"used-for-validation"}]},ht=(de(),de(),ft.id,de(),{id:de(),modelId:1,type:"model",version:1,connections:[{id:de(),targetId:ft.id,type:"generated-by"}]}),vt={id:de(),modelId:1,type:"model-exploration-activity",connections:[{id:de(),targetId:ht.id,type:"used"}]},yt={id:de(),modelId:1,type:"simulation-data",name:"S1_2",connections:[{id:de(),targetId:vt.id,type:"generated-by"}]},mt=(de(),{id:de(),modelId:12,name:"W12_1",type:"wet-lab-data",information:[["Cell line","hNPCs"]]}),bt={id:de(),modelId:12,name:"Wx_1",type:"wet-lab-data",information:[["Cell line","HEK293T"]]},gt={id:de(),modelId:12,name:"Wx_2",type:"wet-lab-data",information:[["Cell line","Diverse cell lines (L, HIH3T3, N1E-115, nHPC, BHK, PTK2)"]]},xt={id:de(),modelId:12,type:"model-building-activity",connections:[{id:de(),targetId:mt.id,type:"used-for-calibration"},{id:de(),targetId:gt.id,type:"used-for-calibration"},{id:de(),targetId:bt.id,type:"used-for-calibration"},{id:de(),targetId:yt.id,type:"used-for-validation"}]},kt=(de(),de(),xt.id,{id:de(),modelId:12,type:"model",version:1,connections:[{id:de(),targetId:xt.id,type:"generated-by"}]}),_t={id:de(),modelId:12,name:"W12_2",type:"wet-lab-data",information:[["Cell line","hNPCs"]]},wt={id:de(),modelId:12,name:"W12_3",type:"wet-lab-data",information:[["Cell line","Diverse cell lines (L, HIH3T3, N1E-115, nHPC, BHK, PTK2)"]]},Ot={id:de(),modelId:12,name:"Wx_3",type:"wet-lab-data",information:[["Cell line","hNPCs"]]},jt={id:de(),modelId:12,type:"model-building-activity",connections:[{id:de(),targetId:Ot.id,type:"used-for-calibration"},{id:de(),targetId:_t.id,type:"used-for-validation"},{id:de(),targetId:wt.id,type:"used-for-validation"},{id:de(),targetId:kt.id,type:"used"}]},Ct=(de(),de(),jt.id,de(),de(),jt.id,n("59ca")),Nt=n.n(Ct),It=null,Rt=function(e){return It||(It=Nt.a.database()),It.ref(e)},St=function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t();case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e["catch"](0),e.abrupt("return",{result:"error",message:e.t0.message});case 9:case"end":return e.stop()}},e,null,[[0,6]])}));return function(t){return e.apply(this,arguments)}}();function Et(e){return Lt.apply(this,arguments)}function Lt(){return Lt=Object(u["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",St(Object(u["a"])(regeneratorRuntime.mark(function e(){var n,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Rt(t).once("value");case 2:if(n=e.sent,n.exists()){e.next=5;break}return e.abrupt("return",{result:"success",items:[]});case 5:return r=n.val(),e.abrupt("return",{result:"success",items:Object.values(r)});case 7:case"end":return e.stop()}},e)}))));case 1:case"end":return e.stop()}},e)})),Lt.apply(this,arguments)}var Mt=function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Et("nodes");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),Tt=function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Et("models");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),$t=function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,St(Object(u["a"])(regeneratorRuntime.mark(function e(){var r,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=Rt(n.ref).child(t),e.next=3,r.once("value");case 3:return o=e.sent,o.exists()?(console.info("Updating ".concat(t," using: ").concat(n.keys)),r.update(n.data)):(console.info("Creating ".concat(t)),r.set(n.data)),e.abrupt("return",{result:"success"});case 6:case"end":return e.stop()}},e)})));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),qt=function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,$t(t,{ref:"models",data:n,keys:r});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),Dt=function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,$t(t.id,{ref:"nodes",data:t,keys:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),At=function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,St(Object(u["a"])(regeneratorRuntime.mark(function e(){var r,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=Rt(t).child(n),e.next=3,r.once("value");case 3:if(o=e.sent,o.exists()){e.next=6;break}return e.abrupt("return",{result:"not-found"});case 6:return console.info("Deleting ".concat(n)),r.remove(),e.abrupt("return",{result:"success"});case 9:case"end":return e.stop()}},e)})));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),Gt=function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,At("nodes",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),Pt=function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,At("models",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),zt=function(e){function t(){return Object(p["a"])(this,t),Object(h["a"])(this,Object(v["a"])(t).apply(this,arguments))}return Object(y["a"])(t,e),Object(f["a"])(t,[{key:"makeRequest",value:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:r=e.sent,"error"===r.result?this.$notification.open({duration:1e4,message:r.message,position:"is-bottom-right",type:"is-danger"}):"not-found"===r.result?this.$notification.open({duration:1e4,message:"Item not found in database",position:"is-bottom-right",type:"is-danger"}):n&&n(r);case 4:case"end":return e.stop()}},e,this)}));function t(t,n){return e.apply(this,arguments)}return t}()}]),t}(L["d"]);zt=m["__decorate"]([L["a"]],zt);var Wt=function(e){function t(){var e;return Object(p["a"])(this,t),e=Object(h["a"])(this,Object(v["a"])(t).apply(this,arguments)),e.expanded=[],e}return Object(y["a"])(t,e),Object(f["a"])(t,[{key:"clickChevron",value:function(e){L["d"].set(this.expanded,e,!this.expanded[e])}},{key:"deleteModel",value:function(e){var t=this.models[e];this.models.splice(e,1),this.expanded.splice(e,1),this.makeRequest(function(){return Pt(t.id)})}},{key:"addModel",value:function(){this.models.push({id:de()});var e=this.models[this.models.length-1];this.makeRequest(function(){return qt(e.id,e)})}},{key:"setModel",value:function(e,t){var n=this;L["d"].set(this.models[e],"modelId",""===t?void 0:+t),this.makeRequest(function(){return qt(n.models[e].id,n.models[e],["modelId"])})}},{key:"setBibInformation",value:function(e,t){var n=this;L["d"].set(this.models[e],"bibInformation",t),this.makeRequest(function(){return qt(n.models[e].id,n.models[e],["bibInformation"])})}}]),t}(Object(L["b"])(zt));m["__decorate"]([Object(L["c"])({type:Array,required:!0})],Wt.prototype,"models",void 0),Wt=m["__decorate"]([Object(L["a"])({components:{Card:G}})],Wt);var Bt=Wt,Ht=Bt,Ft=(n("60e7"),Object(D["a"])(Ht,st,ut,!1,null,"1bf8e99f",null)),Kt=Ft.exports,Ut=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("card",{attrs:{title:e.title,closeable:""},on:{close:function(t){return e.$emit("close")}},scopedSlots:e._u([{key:"footer",fn:function(){return[n("a",{staticClass:"card-footer-item",on:{click:function(t){return e.$emit("close")}}},[e._v("Cancel")]),n("a",{staticClass:"card-footer-item",on:{click:function(t){return e.$emit("delete")}}},[e._v("Delete")])]},proxy:!0}])},[n("b-field",[n("b-select",{attrs:{value:e.value,expanded:""},on:{input:function(t){return e.$emit("input",t)}}},e._l(e.options,function(t){return n("option",{key:t,domProps:{value:t}},[e._v(e._s(t))])}),0)],1)],1)},Xt=[],Jt=function(e){function t(){return Object(p["a"])(this,t),Object(h["a"])(this,Object(v["a"])(t).apply(this,arguments))}return Object(y["a"])(t,e),t}(L["d"]);m["__decorate"]([Object(L["c"])({type:Array,required:!0})],Jt.prototype,"options",void 0),m["__decorate"]([Object(L["c"])({type:String,required:!0})],Jt.prototype,"value",void 0),m["__decorate"]([Object(L["c"])({type:String,required:!0})],Jt.prototype,"title",void 0),Jt=m["__decorate"]([Object(L["a"])({components:{Card:G}})],Jt);var Vt=Jt,Zt=Vt,Yt=Object(D["a"])(Zt,Ut,Xt,!1,null,"d8d3e3da",null),Qt=Yt.exports,en=function(e){return!e.isGroup},tn=function(e){function t(){var e;return Object(p["a"])(this,t),e=Object(h["a"])(this,Object(v["a"])(t).apply(this,arguments)),e.provenanceNodes=[],e.height=window.innerHeight-7,e.width=window.innerWidth,e.expanded={},e.nodes=[],e.links=[],e.legendProps={nodeOutline:g,nodeRadius:w},e.nodesToShow={},e.pointToPlaceNode={x:0,y:0},e.lineStart=null,e.lineEnd=null,e.selectedConnection=null,e.currentRelationship=null,e.possibleRelationships=null,e.selectedNode=null,e.cachedConnections={},e.nodeFields=fe,e.models=[],e.savedGroupIds={},e}return Object(y["a"])(t,e),Object(f["a"])(t,[{key:"showProvenanceGraph",value:function(e){var t=this,n=function e(n){t.nodesToShow[n]=!0;var r=t.highLevelNodeLookup[n];void 0!==r.node.modelId&&(t.expanded[r.node.modelId]=!0),r.outgoing.forEach(function(t){e(t.target.id)})};n(e.id),this.renderGraph()}},{key:"clearNodes",value:function(){this.nodesToShow={},this.renderGraph()}},{key:"openResult",value:function(e){var t=this;void 0!==e.model&&(this.expanded[e.model]=!0),this.highLevelNodes.forEach(function(n){var r=n.node,o=n.id;r.modelId===e.model&&(t.nodesToShow[o]=!0)}),this.renderGraph()}},{key:"nodeRightClick",value:function(e,t){var n=this;e.preventDefault();var r=function(){n.lineStart={x:t.x+t.width/2,y:t.y+t.height/2}};this.$refs.d3.setStrokeColor(t,x);var o=function(e){return n.nodes.filter(en).filter(function(n){var r=n,o={x:n.x+n.width,y:n.y+n.height};return n!==t&&e.x>r.x&&e.y>r.y&&o.x>e.x&&o.y>e.y})},i=function(e,t){var r=n.cachedConnections[e.type];r||(r=n.cachedConnections[e.type]={});var o=r[t.type];return o||(o=r[t.type]=ue(e.type,t.type)),o},a=null,c=se({mousemove:function(e){n.lineEnd=e,r();var c=o(e);if(a&&(n.$refs.d3.setStrokeColor(a,g),a=null),0!==c.length){var s=a=c[c.length-1],u=t.provenanceNode,d=s.provenanceNode,l=i(u,d),p=ce(u,d,l),f=p?x:k;n.$refs.d3.setStrokeColor(a,f)}},mouseup:function(e){if(3===e.which){c(),n.lineStart=null,n.lineEnd=null,n.$refs.d3.setStrokeColor(t,g),a&&n.$refs.d3.setStrokeColor(a,g);var r=o(e);if(0!==r.length){var s=r[r.length-1],u=t.provenanceNode,d=s.provenanceNode,l=i(u,d),p=ae(u,d,{type:l});p&&(n.makeRequest(function(){return Dt(u,["connections"])}),n.renderGraph())}}}})}},{key:"hullDblclick",value:function(e){this.expanded[e.group]=!1;var t={x:0,y:0};e.nodes.forEach(function(e){t.x+=e.x,t.y+=e.y}),t.x/=e.nodes.length,t.y/=e.nodes.length,this.pointToPlaceNode=t,this.renderGraph()}},{key:"createNewNode",value:function(e){var t=this,n=e.id,r=this.highLevelNodeLookup[n].incoming.some(function(e){return!t.nodesToShow[e.source.id]}),o=ie(e,this.modelInformationLookup),i=this.nodeLookup[n]?this.nodeLookup[n]:this.pointToPlaceNode,a=i.x,c=i.y,s="wet-lab-data"===e.type||"simulation-data"===e.type||"model"===e.type,u={isGroup:!1,id:n,text:o,actionText:r?"See more":void 0,type:e.type,model:e.modelId,hullGroup:e.modelId,stroke:g,x:a,y:c,vx:0,vy:0,index:0,provenanceNode:e,rx:s?10:0,width:8*o.length+10,height:_,onDidRightClick:function(e){t.nodeRightClick(e,u)},onDidClick:function(){u.isGroup||(t.selectedNode===e?t.cancelNodeTypeSelection():t.selectedNode=e)},onDidActionClick:function(){var e=function e(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"incoming",o="outgoing"===r?"target":"source";t.highLevelNodeLookup[n][r].forEach(function(n){var r=n[o].node.modelId;void 0!==r&&(t.expanded[r]=!0),t.nodesToShow[n[o].id]=!0,e(n[o].id,"outgoing")})};e(u.id),t.pointToPlaceNode=u,t.renderGraph()}};return u}},{key:"renderGraph",value:function(){var e=this,t=[],n=[],r={},o=this.provenanceNodes.filter(function(t){return e.nodesToShow[t.id]});o.forEach(function(t){if(void 0!==t.modelId&&!e.expanded[t.modelId]&&!r[t.modelId]){var o=t.modelId,i=e.savedGroupIds[t.modelId]=ye(e.savedGroupIds,t.modelId,de()),a=e.nodeLookup[i]?e.nodeLookup[i]:e.pointToPlaceNode,c=Object(l["a"])({},a,{isGroup:!0,model:o,id:i,index:0,vx:0,vy:0,stroke:O,rx:0,text:"M".concat(t.modelId),width:j,height:_,onDidDblclick:function(){e.expanded[o]=!0,e.pointToPlaceNode=c,e.renderGraph()}});r[t.modelId]=c,n.push(c)}}),o.forEach(function(o){var i=o.id,a=e.highLevelNodeLookup[i];a.outgoing.forEach(function(n){var o=n.target.id;if(e.nodesToShow[o]){var a=function(t,n){return void 0===n||e.expanded[n]?t:r[n].id},c=a(i,n.source.node.modelId),s=a(o,n.target.node.modelId);if(s!==c){var u={source:c,target:s,color:n.color,onDidClick:function(){if(e.selectedConnection!==n){e.selectedConnection=n;var t=n.source.node,r=n.target.node,o=N[t.type];if(o){var i=o[r.type];i&&(e.currentRelationship=n.relationship,e.possibleRelationships=i.map(function(e){return"string"===typeof e?e:e.relationship}))}}else e.cancelRelationshipSelection()}};t.push(u)}}}),(void 0===o.modelId||e.expanded[o.modelId])&&n.push(e.createNewNode(o))}),this.pointToPlaceNode={x:0,y:0},this.nodes=n,this.links=t}},{key:"addNode",value:function(){var e={type:"model-building-activity",id:de()};this.provenanceNodes.push(e),this.makeRequest(function(){return Dt(e)}),this.nodesToShow[e.id]=!0,void 0!==e.modelId&&(this.expanded[e.modelId]=!0),this.renderGraph()}},{key:"cancelRelationshipSelection",value:function(){this.selectedConnection=null,this.currentRelationship=null,this.possibleRelationships=null}},{key:"changeRelationship",value:function(e){if(this.selectedConnection){var t=this.selectedConnection.original,n=this.selectedConnection.source.node,r=this.selectedConnection.target.node,o=this.cachedConnections[n.type]=this.cachedConnections[n.type]||{};o[r.type]=e,this.currentRelationship=e,t.type=e,this.renderGraph(),this.cancelRelationshipSelection(),this.makeRequest(function(){return Dt(n,["connections"])})}}},{key:"deleteRelationship",value:function(){if(this.selectedConnection){var e=this.selectedConnection,t=this.selectedConnection.source;t.node.connections&&(t.node.connections=t.node.connections.filter(function(t){return t.id!==e.original.id}),this.renderGraph(),this.cancelRelationshipSelection(),this.makeRequest(function(){return Dt(t.node,["connections"])}))}}},{key:"cancelNodeTypeSelection",value:function(){this.selectedNode=null}},{key:"deleteNode",value:function(){if(this.selectedNode){var e=this.selectedNode;this.provenanceNodes=this.provenanceNodes.filter(function(t){return t.id!==e.id}),this.makeRequest(function(){return Gt(e.id)}),this.cancelNodeTypeSelection(),this.renderGraph()}}},{key:"onNodeChange",value:function(e,t){var n=this;this.nodes.forEach(function(t){if(t.id===e.id&&!t.isGroup){var r=ie(e,n.modelInformationLookup);if(r!==t.text){var o=n.createNewNode(e);n.$refs.d3.replaceNode(o)}}});var r=this.highLevelNodeLookup[e.id],o=r.outgoing,i=r.incoming,a=[],c=function(e,t){e.includes(t)||e.push(t)};[].concat(Object(d["a"])(i),Object(d["a"])(o)).forEach(function(e){var t=e.source,n=e.target,r=e.relationship;ce(t.node,n.node,r)||(c(a,t.node),c(a,n.node),t.node.connections&&(t.node.connections=t.node.connections.filter(function(e){return e.targetId!==n.node.id})))}),0!==a.length&&this.renderGraph(),this.makeRequest(function(){return Dt(e,[t])}),a.map(function(t){n.makeRequest(function(){return Dt(e,["connections"])})})}},{key:"mounted",value:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.makeRequest(Tt,function(e){t.models=e.items}),this.makeRequest(Mt,function(e){t.provenanceNodes=e.items});case 2:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"nodeLookup",get:function(){return re(this.nodes)}},{key:"modelInformationLookup",get:function(){var e={};return this.models.forEach(function(t){void 0!==t.modelId&&(e[t.modelId]=t)}),e}},{key:"highLevelNodes",get:function(){var e={};this.provenanceNodes.forEach(function(t){e[t.id]={id:t.id,node:t,incoming:[],outgoing:[]}});this.provenanceNodes.map(function(t){var n=t.id,r=e[n];t.connections&&t.connections.forEach(function(t){var n=t.targetId,o=e[n],i={id:t.id,relationship:t.type,original:t,color:b[t.type].color,source:r,target:o};r.outgoing.push(i),o.incoming.push(i)})});return Object.values(e)}},{key:"highLevelNodeLookup",get:function(){return re(this.highLevelNodes)}},{key:"searchItems",get:function(){var e=this;return this.provenanceNodes.map(function(t){var n="wet-lab-data"===t.type&&t.information?t.information.map(function(e){var t=Object(s["a"])(e,2),n=(t[0],t[1]);return n}):[];return{id:t.id,title:ie(t,e.modelInformationLookup),type:t.type,model:t.modelId,information:n}})}}]),t}(Object(L["b"])(zt));tn=m["__decorate"]([Object(L["a"])({components:{ProvLegend:Be,D3:we,Search:et,CardSelect:Qt,FormCard:ct,ModelsCard:Kt}})],tn);var nn=tn,rn=nn,on=(n("7d07"),Object(D["a"])(rn,a,c,!1,null,"5a26530a",null)),an=on.exports,cn=r["default"].extend({components:{Visualizer:an}}),sn=cn,un=(n("5c0b"),Object(D["a"])(sn,o,i,!1,null,null,null)),dn=un.exports,ln=n("8a03"),pn=n.n(ln);n("5abe"),n("66ce");r["default"].config.productionTip=!1,r["default"].use(pn.a),Nt.a.initializeApp({apiKey:"AIzaSyCKa8xz75zv_UMdq3lNa36JtpqOGRMS5EA",authDomain:"web-provenance.firebaseapp.com",databaseURL:"https://web-provenance.firebaseio.com",projectId:"web-provenance",storageBucket:"",messagingSenderId:"661014668557",appId:"1:661014668557:web:595398a33864e4ff"}),new r["default"]({render:function(e){return e(dn)}}).$mount("#app")},d8d4:function(e,t,n){"use strict";var r=n("ad75"),o=n.n(r);o.a},eb9d:function(e,t,n){"use strict";var r=n("021e"),o=n.n(r);o.a}});
//# sourceMappingURL=app.380a5780.js.map