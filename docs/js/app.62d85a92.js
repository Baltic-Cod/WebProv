(function(e){function t(t){for(var r,a,c=t[0],s=t[1],u=t[2],l=0,p=[];l<c.length;l++)a=c[l],o[a]&&p.push(o[a][0]),o[a]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);d&&d(t);while(p.length)p.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,c=1;c<n.length;c++){var s=n[c];0!==o[s]&&(r=!1)}r&&(i.splice(t--,1),e=a(a.s=n[0]))}return e}var r={},o={app:0},i=[];function a(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/WebProv/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var d=s;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"021e":function(e,t,n){},"0526":function(e,t,n){"use strict";var r=n("cc01"),o=n.n(r);o.a},"32f2":function(e,t,n){"use strict";var r=n("55d5"),o=n.n(r);o.a},"38a8":function(e,t,n){"use strict";var r=n("a0e6"),o=n.n(r);o.a},"4ea2":function(e,t,n){},"55d5":function(e,t,n){},"5c0b":function(e,t,n){"use strict";var r=n("5e27"),o=n.n(r);o.a},"5e27":function(e,t,n){},"69f3":function(e,t,n){"use strict";var r=n("4ea2"),o=n.n(r);o.a},"7f69":function(e,t,n){"use strict";var r=n("aaaf"),o=n.n(r);o.a},"87b3":function(e,t,n){"use strict";var r=n("97f0"),o=n.n(r);o.a},"97f0":function(e,t,n){},9893:function(e,t,n){"use strict";var r=n("ffad"),o=n.n(r);o.a},a0e6:function(e,t,n){},aaaf:function(e,t,n){},cc01:function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var r=n("2b0e"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("visualizer",{attrs:{"window-height":e.windowHeight,"window-width":e.windowWidth}})],1)},i=[],a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("d3",{ref:"d3",attrs:{height:e.height,width:e.width,links:e.links,nodes:e.nodes,force:"",arrows:"",drag:"",hulls:"","hull-dblclick":e.hullDblclick}}),n("svg",{staticStyle:{position:"absolute",top:"0",left:"0","pointer-events":"none"},attrs:{height:e.height,width:e.width}},[n("line",{attrs:{x1:e.lineStart?e.lineStart.x:0,y1:e.lineStart?e.lineStart.y:0,x2:e.lineEnd?e.lineEnd.x:0,y2:e.lineEnd?e.lineEnd.y:0,"stroke-dasharray":"4",stroke:"black"}})]),n("div",{staticClass:"overlay"},[n("search",{staticClass:"search overlay-child",attrs:{items:e.searchItems},on:{open:e.openResult,dependency:e.showProvenanceGraph,"open-model":e.openModel}}),n("div",{staticStyle:{flex:"1"}}),n("b-button",{staticClass:"clear-button overlay-child",attrs:{type:"is-text"},on:{click:e.addModel}},[e._v("\n      Add Study\n    ")]),n("b-button",{staticClass:"clear-button overlay-child",attrs:{type:"is-text"},on:{click:e.addNode}},[e._v("\n      Add Node\n    ")]),n("b-button",{staticClass:"clear-button overlay-child",attrs:{type:"is-text"},on:{click:e.renderGraph}},[e._v("\n      Refresh\n    ")]),n("b-button",{staticClass:"clear-button overlay-child",attrs:{type:"is-text"},on:{click:e.clearNodes}},[e._v("\n      Clear\n    ")]),n("div",{staticClass:"cards overlay-child"},[n("prov-legend",e._b({},"prov-legend",e.legendProps,!1)),n("div",{staticClass:"spacer"}),e.selectedModel?n("models-card",{attrs:{model:e.selectedModel},on:{cancel:e.cancelSelectedModel,delete:e.deleteSelectedModel,save:e.saveSelectedModel}}):e._e(),e.selectedModel?n("div",{staticClass:"spacer"}):e._e(),e.currentRelationship?n("card-select",{attrs:{title:"Relationship",value:e.currentRelationship,options:e.possibleRelationships},on:{input:e.changeRelationship,close:e.cancelRelationshipSelection,delete:e.deleteRelationship}}):e._e(),n("div",{staticClass:"spacer"}),e.selectedNode?n("form-card",{attrs:{title:"Node Information",fields:e.nodeFields[e.selectedNode.type],node:e.selectedNode},on:{close:e.deselectNode,delete:e.deleteNode,input:e.onNodeChange}}):e._e()],1)],1),n("b-button",{staticStyle:{position:"absolute",left:"20px",bottom:"20px"},attrs:{rounded:"",type:"is-text"},on:{click:e.openHelp}},[n("b-icon",{attrs:{icon:"information-outline"}})],1),n("information-modal",{model:{value:e.showHelp,callback:function(t){e.showHelp=t},expression:"showHelp"}})],1)},c=[],s=(n("c5f6"),n("768b")),u=(n("8615"),n("96cf"),n("3b8d")),d=n("75fc"),l=(n("6762"),n("2fdb"),n("cebc")),p=(n("5df3"),n("4f7f"),n("ac6a"),n("d225")),f=n("b0b4"),h=n("308d"),y=n("6bb5"),v=n("4e2b"),b=n("9ab4"),g={"generated-by":{color:"blue",source:"entity",target:"activity"},"derived-from":{color:"blue",source:"entity",target:"entity"},used:{color:"blue",source:"activity",target:"entity"},"used-for-calibration":{color:"red",source:"activity",target:"entity"},"used-for-validation":{color:"green",source:"activity",target:"entity"}},m="rgb(22, 89, 136)",x="#c0571e",k="rgb(55, 130, 33)",w="rgb(130, 55, 33)",_=40,O=10,j="rgb(0, 0, 0)",C=50,N=(n("456d"),{used:"Used","used-for-validation":"Used for validation","used-for-calibration":"Used for calibration","derived-from":"Derived from","generated-by":"Generated by"}),S=(Object.keys(N),{"model-building-activity":{"wet-lab-data":["used-for-validation","used-for-calibration"],"simulation-data":["used-for-validation","used-for-calibration"],model:["used"]},model:{model:[{relationship:"derived-from",single:!0}],"model-building-activity":[{relationship:"generated-by",single:!0}]},"model-exploration-activity":{model:[{relationship:"used",single:!0}]},"simulation-data":{"model-building-activity":[{relationship:"generated-by",single:!0}],"model-exploration-activity":[{relationship:"generated-by",single:!0}]},"wet-lab-data":{}}),I={model:"Model","model-building-activity":"Model Building Activity","model-exploration-activity":"Model Exploration Activity","simulation-data":"Simulation Data","wet-lab-data":"Wet Lab Data"},R=Object.keys(I),L=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("card",{attrs:{title:"Prov DM Legend"}},[n("div",{staticClass:"legend"},[e._l(["entity","activity"],function(t){return n("div",{key:t,staticClass:"legend--item"},[n("d3",{attrs:{height:25,width:100}},[n("node",{staticClass:"legend--block",attrs:{rx:"entity"===t?e.nodeRadius:0,id:t,size:25,stroke:e.nodeOutline}})],1),n("div",{staticClass:"legend--text"},[e._v(e._s(e._f("uppercase")(t)))])],1)}),e._l(e.relationshipLegend,function(t){return n("div",{key:t.relationship,staticClass:"legend--item"},[n("d3",{attrs:{height:25,width:100,arrows:"","arrow-size":5}},[n("node",{staticClass:"legend--block",attrs:{rx:t.targetRadius,id:"two",size:25,stroke:e.nodeOutline}}),n("relationship",{attrs:{source:"one",target:"two",color:t.color}}),n("node",{staticClass:"legend--block",attrs:{rx:t.sourceRadius,id:"one",size:25,x:75,stroke:e.nodeOutline}})],1),n("div",{staticClass:"legend--text"},[e._v(e._s(t.relationship))])],1)})],2)])},M=[],E=(n("ffc1"),n("60a3")),$=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"fade"}},[n("div",{staticClass:"helper card flip-horizontal-bottom"},[e._t("header",[e.title?n("div",{staticClass:"card-header"},[n("p",{staticClass:"card-header-title"},[e._v("\n          "+e._s(e.title)+"\n        ")]),n("a",{staticClass:"card-header-icon"},[e.closeable?n("b-icon",{attrs:{icon:"close",size:"is-small"},nativeOn:{click:function(t){return e.$emit("close")}}}):e._e()],1)]):e._e()]),n("div",{staticClass:"card-content"},[n("div",{staticClass:"content information"},[e._t("default")],2)]),n("footer",{staticClass:"card-footer"},[e._t("footer")],2)],2)])},T=[],D=r["default"].extend({props:{title:String,noCollapse:Boolean,closeable:Boolean}}),G=D,A=(n("eb9d"),n("2877")),P=Object(A["a"])(G,$,T,!1,null,"58ba9557",null),q=P.exports,H=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("svg",{ref:"svg",staticClass:"svg",attrs:{height:e.height,width:e.width}},[e._t("default")],2)},z=[],W=(n("ac4d"),n("8a81"),n("6c7b"),n("04ff"),n("5698")),B=n("7618");n("f400");function F(e){return function(){return e}}function K(){return 1e-6*(Math.random()-.5)}function U(e){return e.index}function X(e,t){var n=e.get(t);if(!n)throw new Error("missing: "+t);return n}var J=function(e){var t,n,r,o,i,a=U,c=d,s=F(30),u=1;function d(e){return 1/Math.min(o[e.source.index],o[e.target.index])}function l(r){for(var o=0,a=e.length;o<u;++o)for(var c,s,d,l,p,f,h,y=0;y<a;++y)c=e[y],s=c.source,d=c.target,l=d.x+d.width+d.vx-s.x-s.vx||K(),p=d.y+d.vy-s.y-s.vy||K(),f=Math.sqrt(l*l+p*p),f=(f-n[y])/f*r*t[y],l*=f,p*=f,d.vx-=l*(h=i[y]),d.vy-=p*h,s.vx+=l*(h=1-h),s.vy+=p*h}function p(){if(r){var c,s,u=r.length,d=e.length,l=new Map(r.map(function(e,t){return[a(e,t,r),e]}));for(c=0,o=new Array(u);c<d;++c)s=e[c],s.index=c,"object"!==Object(B["a"])(s.source)&&(s.source=X(l,s.source)),"object"!==Object(B["a"])(s.target)&&(s.target=X(l,s.target)),o[s.source.index]=(o[s.source.index]||0)+1,o[s.target.index]=(o[s.target.index]||0)+1;for(c=0,i=new Array(d);c<d;++c)s=e[c],i[c]=o[s.source.index]/(o[s.source.index]+o[s.target.index]);t=new Array(d),f(),n=new Array(d),h()}}function f(){if(r)for(var n=0,o=e.length;n<o;++n)t[n]=+c(e[n],n,e)}function h(){if(r)for(var t=0,o=e.length;t<o;++t)n[t]=+s(e[t],t,e)}return null==e&&(e=[]),l.initialize=function(e){r=e,p()},l.links=function(t){return arguments.length?(e=t,p(),l):e},l.id=function(e){return arguments.length?(a=e,l):a},l.iterations=function(e){return arguments.length?(u=+e,l):u},l.strength=function(e){return arguments.length?(c="function"===typeof e?e:F(+e),f(),l):c},l.distance=function(e){return arguments.length?(s="function"===typeof e?e:F(+e),h(),l):s},l},V=(n("1c4c"),n("c7c6"),n("80ef")),Z=function(e){return e.x},Y=function(e){return e.y},Q=function(e){return function(){return e}},ee=function(){return 1e-6*(Math.random()-.5)},te=function(e){return void 0!==e},ne=25,re=function(){var e,t,n,r,o=[],i=Q(-30),a=1,c=1/0,s=.81,u=[];function d(r){n=r;var o=Object(V["a"])(e,Z,Y).visitAfter(function(e){return p(e)});e.forEach(function(e){t=e,o.visit(function(e,t,n,r){return f(e,t,n,r)})})}function l(){e&&(r=new Array(e.length),u=new Array(e.length),e.forEach(function(e){r[e.index]=i(),u[e.index]={},o.forEach(function(t){u[e.index][t]=r[e.index]+(t===e.hullGroup?ne:-ne)})}))}function p(e){var t=0,n=0,o={};if(Array.isArray(e)){var i=0,a=0,c=!0,s=!1,u=void 0;try{for(var d,l=function(){var e=d.value;if(!e)return"continue";var r=Math.abs(e.value);if(!r)return"continue";t+=e.value,n+=r,i+=r*e.x,a+=r*e.y,Object.keys(e.groups).map(function(t){void 0===o[t]&&(o[t]=0),o[t]+=e.groups[t]})},p=e[Symbol.iterator]();!(c=(d=p.next()).done);c=!0)l()}catch(h){s=!0,u=h}finally{try{c||null==p.return||p.return()}finally{if(s)throw u}}e.x=i/n,e.y=a/n}else{var f=e;f.x=f.data.x,f.y=f.data.y;do{t+=r[f.data.index],void 0!==f.data.hullGroup&&(void 0===o[f.data.hullGroup]&&(o[f.data.hullGroup]=0),o[f.data.hullGroup]++),f=f.next}while(f)}e.value=t,e.groups=o}function f(e,o,i,d){if(!e.value)return!0;var l=e.data,p=e.x-(t.x+t.width/2),f=e.y-(t.y+t.height/2),h=d-o,y=p*p+f*f;if(h*h/y<s){if(y<c){0===p&&(p=ee(),y+=p*p),0===f&&(f=ee(),y+=f*f),y<a&&(y=Math.sqrt(a*y));var v=e.value;if(void 0!==t.hullGroup){var b=e.groups;Object.keys(b).forEach(function(e){var n=b[e];t.hullGroup===+e?v=Math.min(0,v+ne*n):v-=ne*n})}v*=-Math.tanh(5e-6*(y-Math.pow(700,2))),t.vx+=p*v*n/y,t.vy+=f*v*n/y}return!0}if(!(Array.isArray(e)||y>=c)){(l!==t||e.next)&&(0===p&&(p=ee(),y+=p*p),0===f&&(f=ee(),y+=f*f),y<a&&(y=Math.sqrt(a*y)));do{l!==t&&(h=void 0!==t.hullGroup?u[l.index][t.hullGroup]*n/y:r[l.index]*n/y,t.vx+=p*h,t.vy+=f*h),e=e.next}while(e)}}return d.initialize=function(t){e=t,o=Array.from(new Set(e.map(function(e){return e.hullGroup}))).filter(te),l()},d.strength=function(e){return void 0===e?i:("function"!==typeof e&&(e=Q(+e)),i=e,l(),d)},d.distanceMin=function(e){return void 0===e?Math.sqrt(a):(a=e*e,d)},d.distanceMax=function(e){return void 0===e?Math.sqrt(c):(c=e*e,d)},d.theta=function(e){return void 0===e?Math.sqrt(s):(s=e*e,d)},d},oe=(n("a481"),n("6b54"),n("7f7f"),n("6c86")),ie=function(e){var t={},n=!0,r=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var c=i.value;t[c.id]=c}}catch(s){r=!0,o=s}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return t};function ae(e,t){return Object(E["d"])(e,t)}function ce(e,t){switch(e.type){case"wet-lab-data":return e.name||"None";case"model-building-activity":return"MBA";case"simulation-data":return e.name||"None";case"model-exploration-activity":return"MEA";case"model":if(void 0===e.studyId)return"None";var n="M".concat(e.studyId);void 0===e.version||1===e.version||(2===e.version?n+="'":n+="v".concat(e.version));var r=t[e.studyId];return r?n+" (".concat(r.source,")"):n}}var se=function(e,t,n){var o=n.doConnection,i=void 0===o||o;e.connections||r["default"].set(e,"connections",[]);var a=S[e.type],c=a[t.type];if(!c)return!1;if(!n.type)return!1;var s=c.some(function(e){return"string"===typeof e?e===n.type:e.relationship===n.type});return!!s&&(i&&e.connections.push({id:pe(),type:n.type,targetId:t.id}),!0)},ue=function(e,t,n){return se(e,t,{doConnection:!1,type:n})},de=function(e,t){for(var n=Object.keys(e),r=function(){for(var t=0,r=n;t<r.length;t++){var o=r[t],i=e[o];"remove"!==i&&window.removeEventListener(o,i)}},o=0,i=n;o<i.length;o++){var a=i[o],c=e[a];"remove"===c&&(e[a]=r),window.addEventListener(a,c,t)}return r},le=function(e,t){var n=S[e],r=n[t];if(r){var o=r[0];return"string"===typeof o?o:o.relationship}},pe=function(){return"A"+Math.random().toString().substr(2,9)},fe={name:"type",type:"string",options:R},he={name:"studyId",type:"number"},ye={model:[fe,he,{name:"version",type:"number"}],"model-building-activity":[fe,he],"model-exploration-activity":[fe,he],"simulation-data":[fe,he,{name:"name",type:"string"}],"wet-lab-data":[fe,he,{name:"name",type:"string"},{name:"information",type:"string",multiple:!0}]};function ve(e){return e.charAt(0).toUpperCase()+e.substring(1)}function be(e){return ve(e.replace(/([A-Z]+)/g," $1").replace(/([A-Z][a-z])/g," $1"))}function ge(e,t,n){var r=e[t];return r||n}var me=function(e,t,n){r["default"].set(e,t,n)};function xe(e){return e}function ke(e,t){return we.apply(this,arguments)}function we(){return we=Object(u["a"])(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:r=e.sent,"error"===r.result?oe["NotificationProgrammatic"].open({duration:1e4,message:r.message,position:"is-bottom-right",type:"is-danger"}):"not-found"===r.result?oe["NotificationProgrammatic"].open({duration:1e4,message:"Item not found in database",position:"is-bottom-right",type:"is-danger"}):n&&n(r);case 4:case"end":return e.stop()}},e)})),we.apply(this,arguments)}function _e(e,t,n,r){var o=(r.y-n.y)*(t.x-e.x)-(r.x-n.x)*(t.y-e.y);if(0===o)return null;var i=e.y-n.y,a=e.x-n.x,c=(r.x-n.x)*i-(r.y-n.y)*a,s=(t.x-e.x)*i-(t.y-e.y)*a;return i=c/o,a=s/o,{x:e.x+i*(t.x-e.x),y:e.y+i*(t.y-e.y),onLine1:i>0&&i<1,onLine2:a>0&&a<1}}var Oe=W["h"](W["i"]),je=0,Ce=function(e){function t(){var e;return Object(p["a"])(this,t),e=Object(h["a"])(this,Object(y["a"])(t).apply(this,arguments)),e.isD3=!0,e.addedLinks=[],e.addedNodes=[],e.selection=null,e.curve=W["f"]().curve(W["a"].tension(.85)),e}return Object(v["a"])(t,e),Object(f["a"])(t,[{key:"fill",value:function(e){return Oe(""+e.group)}},{key:"addLink",value:function(e){this.addedLinks.push(Object(l["a"])({},e,{color:e.color?e.color:this.defaultStrokeColor}))}},{key:"addNode",value:function(e){this.allNodes.push(e)}},{key:"convexHulls",value:function(){var e={},t=this.hullOffset;this.allNodes.forEach(function(n){if(void 0!==n.hullGroup){var r=n.hullGroup,o=e[r]||(e[r]={points:[],nodes:[]});o.nodes.push(n),o.points.push([n.x-t,n.y-t]),o.points.push([n.x+n.width+t,n.y-t]),o.points.push([n.x+n.width+t,n.y+n.height+t]),o.points.push([n.x-t,n.y+n.height+t])}});for(var n=[],r=0,o=Object.keys(e);r<o.length;r++){var i=o[r],a=W["g"](e[i].points);a&&n.push({group:Number.parseInt(i,10),nodes:e[i].nodes,path:a})}return n}},{key:"applyNode",value:function(e){var t=this;e.attr("id",function(e){return e.id}).attr("width",function(e){return e.width}).attr("height",function(e){return e.height}).attr("fill",function(e){return"white"}).style("stroke-width",3).attr("rx",function(e){return e.rx}).attr("x",function(e){return t.force?0:e.x}).attr("y",function(e){return t.force?0:e.y}).style("stroke",function(e){return e.stroke})}},{key:"applyText",value:function(e){e.filter(function(e){return void 0!==e.text}).attr("id",function(e){return"text-".concat(e.id)}).attr("x",function(e){return 4*e.text.length+5}).attr("y",function(e){return e.height/2+5}).style("stroke-width",0).style("font-family","monospace").style("pointer-events","none").style("text-anchor","middle").style("font-size","12px").text(function(e){return e.text})}},{key:"doRender",value:function(){var e=this,t=W["j"](this.$refs.svg);t.selectAll("*").remove();var n=function(e){return function(t){e&&e(t)}},r=null;this.hulls&&(r=t.append("g").attr("class","hulls").selectAll("path").data(this.convexHulls()).enter().append("path").attr("class","hull").attr("d",function(t){return e.curve(t.path)}).style("fill",this.fill).style("opacity",.5),r.on("click",n(this.hullClick)),r.on("dblclick",n(this.hullDblclick)));var o=null;this.force&&(o=W["e"](this.allNodes).force("link",J(this.allLinks).id(function(e){return""+e.id}).strength(.3)).velocityDecay(.5).force("charge",re().strength(-1e3)).force("center",W["d"](this.width/2,this.height/2)));var i=this.allLinks.map(function(e){var t=e.color;return t});this.arrows&&t.append("svg:defs").selectAll("marker").data(i).enter().append("svg:marker").attr("id",function(e){return"".concat(je,"-").concat(e)}).attr("viewBox","0 -5 10 10").attr("refX",10).attr("refY",0).attr("markerWidth",this.arrowSize).attr("markerHeight",this.arrowSize).attr("orient","auto").append("svg:path").style("fill",function(e){return e}).attr("d","M0,-5L10,0L0,5");var a=t.append("g").attr("stroke-opacity",0).selectAll("line").data(this.allLinks).join("line").attr("stroke-width",function(e){return 6}).attr("stroke",function(e){return e.color}).on("click",function(e){e.onDidClick&&e.onDidClick(W["c"])}),c=t.append("g").attr("stroke-opacity",.6).selectAll("line").data(this.allLinks).join("line").style("pointer-events","none").attr("stroke-width",function(e){return 3}).attr("stroke",function(e){return e.color});if(!o){var s=function(t,n){return function(r){var o=e.nodeLookup[r.source],i=e.nodeLookup[r.target],a=o[t],c=i[t],s=c>a,u=e.nodeLookup[r[n]],d="y"===t?u.height/2:s?0:u.width;return u[t]+d}};c.attr("x1",s("x","source")).attr("y1",s("y","source")).attr("x2",s("x","target")).attr("y2",s("y","target"))}this.arrows&&c.attr("marker-end",function(e){return"url(#".concat(je,"-").concat(e.color,")")});var u=this.selection=t.append("g").attr("stroke","#fff").selectAll(".node").data(this.allNodes).join("g").attr("class","node");this.applyNode(u.append("rect"));var d=function(e){return function(t){var n=t[e];n&&n(W["c"])}};if(u.on("click",d("onDidClick")),u.on("dblclick",d("onDidDblclick")),u.on("mousedown",d("onDidMousedown")),u.on("contextmenu",d("onDidRightClick")),this.drag){var l=W["b"]().on("start",function(e){o&&!W["c"].active&&o.alphaTarget(.3).restart(),e.fx=e.x,e.fy=e.y}).on("drag",function(e){e.fx=W["c"].x,e.fy=W["c"].y}).on("end",function(e){o&&!W["c"].active&&o.alphaTarget(0),e.fx=null,e.fy=null});u.call(l)}this.applyText(u.append("text")),u.append("text").filter(function(e){return void 0!==e.actionText}).attr("x",function(e){return 3*e.actionText.length-2}).attr("y",function(e){return e.height+12}).style("stroke-width",0).style("font-family","monospace").style("text-anchor","middle").attr("class","action").style("font-size","10px").text(function(e){return e.actionText}).on("click",d("onDidActionClick")),o&&o.on("tick",function(){r&&!r.empty()&&r.data(e.convexHulls()).attr("d",function(t){return e.curve(t.path)});var t=function(e){return{x:e.x+e.width/2,y:e.y+e.height/2}},n=function(e,n){var r,o={x:n.x,y:n.y},i={x:n.x+n.width,y:n.y},a={x:n.x,y:n.y+n.height},c={x:n.x+n.width,y:n.y+n.height},s=t(n),u=t(e),d=_e(s,u,o,i),l=_e(s,u,i,c),p=_e(s,u,c,a),f=_e(s,u,a,o);r=s.x>u.x&&s.y>u.y?[d,f]:s.x<u.x&&s.y>u.y?[d,l]:s.x>u.x&&s.y<u.y?[p,f]:[l,p];var h=!0,y=!1,v=void 0;try{for(var b,g=r[Symbol.iterator]();!(h=(b=g.next()).done);h=!0){var m=b.value;if(m&&(m.onLine1&&m.onLine2))return{center:s,point:m}}}catch(x){y=!0,v=x}finally{try{h||null==g.return||g.return()}finally{if(y)throw v}}return{center:s,point:{x:s.x,y:s.y}}};c.attr("x1",function(e){var t=e.source;return t.x+t.width/2}).attr("y1",function(e){var t=e.source;return t.y+t.height/2}).attr("x2",function(e){var t=n(e.source,e.target),r=t.point,o=t.center;return o.x+r.x-o.x}).attr("y2",function(e){var t=n(e.source,e.target),r=t.point,o=t.center;return o.y+r.y-o.y}),a.attr("x1",function(e){var t=e.source;return t.x+t.width/2}).attr("y1",function(e){var t=e.source;return t.y+t.height/2}).attr("x2",function(e){var t=n(e.source,e.target),r=t.point,o=t.center;return o.x+r.x-o.x}).attr("y2",function(e){var t=n(e.source,e.target),r=t.point,o=t.center;return o.y+r.y-o.y}),u.attr("transform",function(e){return"translate(".concat(e.x,", ").concat(e.y,")")})}),je++}},{key:"setStrokeColor",value:function(e,t){e.stroke=t,this.selection&&this.selection.select("#".concat(e.id)).style("stroke",function(e){return e.stroke})}},{key:"replaceNode",value:function(e){this.nodes.forEach(function(t){t.id===e.id&&Object.assign(t,e)}),this.selection&&(this.applyNode(this.selection.select("#".concat(e.id))),this.applyText(this.selection.select("#text-".concat(e.id))))}},{key:"mounted",value:function(){this.doRender()}},{key:"reRenderNodes",value:function(){this.doRender()}},{key:"reRenderLinks",value:function(){this.doRender()}},{key:"allNodes",get:function(){return[].concat(Object(d["a"])(this.addedNodes),Object(d["a"])(this.nodes))}},{key:"allLinks",get:function(){var e=this,t=[].concat(Object(d["a"])(this.links),Object(d["a"])(this.addedLinks));return t.map(function(t){return Object(l["a"])({},t,{color:t.color?t.color:e.defaultStrokeColor})})}},{key:"nodeLookup",get:function(){return ie(this.allNodes)}}]),t}(E["c"]);b["__decorate"]([Object(E["b"])({type:String,default:"#000"})],Ce.prototype,"defaultStrokeColor",void 0),b["__decorate"]([Object(E["b"])({type:Boolean,default:!1})],Ce.prototype,"arrows",void 0),b["__decorate"]([Object(E["b"])({type:Boolean,default:!1})],Ce.prototype,"force",void 0),b["__decorate"]([Object(E["b"])({type:Boolean,default:!1})],Ce.prototype,"drag",void 0),b["__decorate"]([Object(E["b"])({type:Boolean,default:!1})],Ce.prototype,"hulls",void 0),b["__decorate"]([Object(E["b"])({type:Number,default:100})],Ce.prototype,"height",void 0),b["__decorate"]([Object(E["b"])({type:Number,default:100})],Ce.prototype,"width",void 0),b["__decorate"]([Object(E["b"])({type:Number,default:6})],Ce.prototype,"arrowSize",void 0),b["__decorate"]([Object(E["b"])({type:Number,default:40})],Ce.prototype,"hullOffset",void 0),b["__decorate"]([Object(E["b"])({type:Array,default:function(){return[]}})],Ce.prototype,"nodes",void 0),b["__decorate"]([Object(E["b"])({type:Array,default:function(){return[]}})],Ce.prototype,"links",void 0),b["__decorate"]([Object(E["b"])({type:Function,required:!1})],Ce.prototype,"hullClick",void 0),b["__decorate"]([Object(E["b"])({type:Function,required:!1})],Ce.prototype,"hullDblclick",void 0),b["__decorate"]([Object(E["b"])({type:Function,required:!1})],Ce.prototype,"nodeDblclick",void 0),b["__decorate"]([Object(E["b"])({type:Function,required:!1})],Ce.prototype,"actionClick",void 0),b["__decorate"]([ae("nodes")],Ce.prototype,"reRenderNodes",null),b["__decorate"]([ae("links")],Ce.prototype,"reRenderLinks",null),Ce=b["__decorate"]([E["a"]],Ce);var Ne=Ce,Se=Ne,Ie=(n("32f2"),Object(A["a"])(Se,H,z,!1,null,"bbd2f41e",null)),Re=Ie.exports,Le=function(e){return!0===e.isD3},Me=function(e){function t(){return Object(p["a"])(this,t),Object(h["a"])(this,Object(y["a"])(t).apply(this,arguments))}return Object(v["a"])(t,e),Object(f["a"])(t,[{key:"mounted",value:function(){if(!Le(this.$parent))throw Error("parent must be D3");this.$parent.addLink({target:this.target,source:this.source,color:this.color})}},{key:"render",value:function(){return null}}]),t}(E["c"]);b["__decorate"]([Object(E["b"])({type:String,required:!0})],Me.prototype,"target",void 0),b["__decorate"]([Object(E["b"])({type:String,required:!0})],Me.prototype,"source",void 0),b["__decorate"]([Object(E["b"])({type:String,required:!1})],Me.prototype,"color",void 0),Me=b["__decorate"]([E["a"]],Me);var Ee,$e,Te=Me,De=Te,Ge=Object(A["a"])(De,Ee,$e,!1,null,"ebce97d6",null),Ae=Ge.exports,Pe=function(e){function t(){return Object(p["a"])(this,t),Object(h["a"])(this,Object(y["a"])(t).apply(this,arguments))}return Object(v["a"])(t,e),Object(f["a"])(t,[{key:"mounted",value:function(){if(!Le(this.$parent))throw Error("parent must be D3");var e=this;this.$parent.addNode({id:this.id,rx:this.rx,x:this.x,y:this.y,text:this.text,height:this.size,width:this.size,stroke:this.stroke,vx:0,vy:0,index:0,onDidClick:function(){e.$emit("click",this)},onDidMousedown:function(){e.$emit("mousedown",this)},onDidDblclick:function(){e.$emit("dblclick",this)},onDidRightClick:function(){e.$emit("contextmenu",this)}})}},{key:"render",value:function(){return null}}]),t}(E["c"]);b["__decorate"]([Object(E["b"])({type:String,required:!0})],Pe.prototype,"id",void 0),b["__decorate"]([Object(E["b"])({type:Number,required:!0})],Pe.prototype,"rx",void 0),b["__decorate"]([Object(E["b"])({type:Number,default:0})],Pe.prototype,"x",void 0),b["__decorate"]([Object(E["b"])({type:Number,default:0})],Pe.prototype,"y",void 0),b["__decorate"]([Object(E["b"])({type:Number,required:!0})],Pe.prototype,"size",void 0),b["__decorate"]([Object(E["b"])({type:String,default:""})],Pe.prototype,"text",void 0),b["__decorate"]([Object(E["b"])({type:String,required:!0})],Pe.prototype,"stroke",void 0),Pe=b["__decorate"]([E["a"]],Pe);var qe,He,ze=Pe,We=ze,Be=(n("0526"),Object(A["a"])(We,qe,He,!1,null,"8ea56720",null)),Fe=Be.exports,Ke=function(e){function t(){return Object(p["a"])(this,t),Object(h["a"])(this,Object(y["a"])(t).apply(this,arguments))}return Object(v["a"])(t,e),Object(f["a"])(t,[{key:"relationshipLegend",get:function(){var e=this;return Object.entries(g).map(function(t){var n=Object(s["a"])(t,2),r=n[0],o=n[1];return Object(l["a"])({},o,{sourceRadius:"entity"===o.source?e.nodeRadius:0,targetRadius:"entity"===o.target?e.nodeRadius:0,relationship:r})})}}]),t}(E["c"]);b["__decorate"]([Object(E["b"])({type:Number,required:!0})],Ke.prototype,"nodeRadius",void 0),b["__decorate"]([Object(E["b"])({type:String,required:!0})],Ke.prototype,"nodeOutline",void 0),Ke=b["__decorate"]([Object(E["a"])({components:{Node:Fe,Card:q,Relationship:Ae,D3:Re},filters:{uppercase:ve}})],Ke);var Ue=Ke,Xe=Ue,Je=(n("7f69"),Object(A["a"])(Xe,L,M,!1,null,"5096d2e0",null)),Ve=Je.exports,Ze=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{attrs:{active:e.value,width:640,scroll:"keep"},on:{"update:active":e.input}},[n("div",{staticClass:"card"},[n("div",{staticClass:"card-content"},[n("h1",[e._v("\n        Creating Links\n      ")]),n("p",[e._v("To create a link, right-click and hold on a node and then drag your mouse to another node. Once your mouse is over the desired node, release your right-click. When you drag your mouse over nodes, they will be highlighted either green or red. If the node turns red, this means that the connection between the two selected nodes is not valid. Likewise, if the node turns green, this indicates a valid connection.")]),n("h1",[e._v("\n        Creating Nodes\n      ")]),n("p",[e._v('To create a node, just click on the "Add Node" button located on the top-right of the screen. This will create a new node and automatically save it to the database.')]),n("h1",[e._v("\n        Editing Nodes\n      ")]),n("p",[e._v("To edit a node, just click a node that is shown in the graph. This will open up a form card that has all of the avaiable fields. When editing, your changes will be automatically saved to the database. Note, it is not possible to edit a contracted model node.")])])])])},Ye=[],Qe=xe({props:{value:{type:Boolean,required:!0}},setup:function(e,t){return{input:function(e){t.emit("input",e)}}}}),et=Qe,tt=(n("87b3"),Object(A["a"])(et,Ze,Ye,!1,null,"a761bbf2",null)),nt=tt.exports,rt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("card",{scopedSlots:e._u([{key:"header",fn:function(){return[n("b-field",{staticStyle:{margin:"1.5rem 1.5rem 0"}},[n("b-input",{ref:"input",attrs:{placeholder:"Search...",type:"search",icon:"magnify",expanded:""},on:{input:e.checkEmpty},nativeOn:{keydown:function(t){return e.checkEnter(t)}},model:{value:e.searchText,callback:function(t){e.searchText=t},expression:"searchText"}}),n("p",{staticClass:"control"},[n("button",{staticClass:"button is-primary",on:{click:e.search}},[e._v("\n          Search\n        ")])])],1)]},proxy:!0},{key:"footer",fn:function(){return[e.results.length?n("a",{staticClass:"card-footer-item",attrs:{href:"#"},on:{click:e.clear}},[e._v("Clear")]):e._e()]},proxy:!0}])},[n("div",{staticClass:"results"},e._l(e.results,function(t,r){return n("div",{key:r},[n("div",{staticStyle:{display:"flex","align-items":"flex-start"}},[n("div",[n("h4",{staticClass:"result--title"},[e._v(e._s(t.title))]),n("h6",{staticClass:"result--type"},[e._v(e._s(void 0===t.model?"No Study":t.model))]),n("p",{staticClass:"result--extra"},[e._v(e._s(e._f("format")(t.information)))])]),n("div",{staticStyle:{flex:"1"}}),n("div",{staticStyle:{display:"flex"}},[n("b-tooltip",{attrs:{label:"Open Study Information",position:"is-left"}},[n("b-button",{attrs:{type:"is-text","icon-right":"information-outline"},on:{click:function(n){return e.$emit("open-model",t)}}})],1),n("b-tooltip",{attrs:{label:"Show Provenance Graph",position:"is-left"}},[n("b-button",{staticStyle:{transform:"rotate(-90deg)"},attrs:{type:"is-text","icon-right":"call-split"},on:{click:function(n){return e.$emit("dependency",t)}}})],1),n("b-tooltip",{attrs:{label:"Show Entire Study",position:"is-left"}},[n("b-button",{attrs:{type:"is-text","icon-right":"arrow-expand-all"},on:{click:function(n){return e.$emit("open",t)}}})],1)],1)]),r!==e.results.length-1?n("hr",{staticClass:"result--break"}):e._e()])}),0)])},ot=[],it=(n("386d"),n("ffe7")),at=n.n(it),ct={keys:["information","title","id","model"]},st=function(e,t){if(""===t.trim())return e;var n=new at.a(e,ct);return n.search(t)},ut=function(e){function t(){var e;return Object(p["a"])(this,t),e=Object(h["a"])(this,Object(y["a"])(t).apply(this,arguments)),e.results=[],e.searchText="",e}return Object(v["a"])(t,e),Object(f["a"])(t,[{key:"checkEnter",value:function(e){13===e.which&&this.search()}},{key:"checkEmpty",value:function(){""===this.searchText&&(this.results=[])}},{key:"search",value:function(){var e=this.$loading.open({container:this.$el});setTimeout(function(){return e.close()},500),this.results=st(this.items,this.searchText)}},{key:"clear",value:function(){this.results=[],this.searchText="",this.$refs.input.focus()}}]),t}(E["c"]);b["__decorate"]([Object(E["b"])({type:Array,required:!0})],ut.prototype,"items",void 0),ut=b["__decorate"]([Object(E["a"])({components:{Card:q},filters:{format:function(e){return e.join(" • ")}}})],ut);var dt=ut,lt=dt,pt=(n("69f3"),Object(A["a"])(lt,rt,ot,!1,null,"ce5a8a5c",null)),ft=pt.exports,ht=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("card",{attrs:{title:e.title},scopedSlots:e._u([{key:"footer",fn:function(){return[n("a",{staticClass:"card-footer-item",on:{click:function(t){return e.$emit("close")}}},[e._v("Close")]),n("a",{staticClass:"card-footer-item",on:{click:function(t){return e.$emit("delete")}}},[e._v("Delete")])]},proxy:!0}])},e._l(e.fields,function(t,r){return n("b-field",{key:r,attrs:{label:e._f("wordCase")(t.name)}},[t.options?n("b-select",{attrs:{value:e.node[t.name],expanded:""},on:{input:function(n){return e.onInput(t.name,t.type,n)}}},e._l(t.options,function(t){return n("option",{key:t,domProps:{value:t}},[e._v(e._s(t))])}),0):t.multiple?n("div",[e._l(e.node[t.name],function(r,o){return n("div",{key:t.name+"-"+o,staticStyle:{display:"flex"}},[n("b-field",[n("b-input",{attrs:{placeholder:"Key",value:r[0]},on:{input:function(n){return e.update(t.name,r,0,n)}}})],1),n("div",{staticStyle:{flex:"0 0 10px"}}),n("b-field",[n("b-input",{attrs:{placeholder:"Value",value:r[1]},on:{input:function(n){return e.update(t.name,r,1,n)}}}),n("p",{staticClass:"control"},[n("button",{staticClass:"button is-primary",on:{click:function(n){return e.deleteField(e.node[t.name],t.name,o)}}},[n("b-icon",{attrs:{icon:"close"}})],1)])],1)],1)}),n("b-button",{staticClass:"is-primary",on:{click:function(n){return e.addField(t.name)}}},[e._v("\n        Add Field\n      ")])],2):n("b-input",{attrs:{type:t.type,value:e.node[t.name]},on:{input:function(n){return e.onInput(t.name,t.type,n)}}})],1)}),1)},yt=[],vt=function(e){function t(){return Object(p["a"])(this,t),Object(h["a"])(this,Object(y["a"])(t).apply(this,arguments))}return Object(v["a"])(t,e),Object(f["a"])(t,[{key:"update",value:function(e,t,n,r){t[n]=r,this.$emit("input",this.node,e)}},{key:"addField",value:function(e){var t=this.node[e];"string"!==typeof t&&"number"!==typeof t&&(void 0===t&&(t=[],E["c"].set(this.node,e,t)),t.push(["",""]),this.$emit("input",this.node,e))}},{key:"deleteField",value:function(e,t,n){E["c"].set(this.node,t,e.filter(function(e,t){return t!==n}))}},{key:"onInput",value:function(e,t,n){var r="string"===t?n:""===n?void 0:+n;E["c"].set(this.node,e,r),this.$emit("input",this.node,e)}}]),t}(E["c"]);b["__decorate"]([Object(E["b"])({type:Array,required:!0})],vt.prototype,"fields",void 0),b["__decorate"]([Object(E["b"])({type:Object,required:!0})],vt.prototype,"node",void 0),b["__decorate"]([Object(E["b"])({type:String,required:!0})],vt.prototype,"title",void 0),vt=b["__decorate"]([Object(E["a"])({components:{Card:q},filters:{wordCase:be}})],vt);var bt=vt,gt=bt,mt=Object(A["a"])(gt,ht,yt,!1,null,null,null),xt=mt.exports,kt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("card",{attrs:{title:"Simulation Study"},scopedSlots:e._u([{key:"footer",fn:function(){return[n("a",{staticClass:"card-footer-item",on:{click:e.cancel}},[e._v("Cancel")]),n("a",{staticClass:"card-footer-item",on:{click:e.deleteModel}},[e._v("Delete")]),n("a",{staticClass:"card-footer-item",on:{click:e.save}},[e._v("Save")])]},proxy:!0}])},[n("div",[n("b-field",{staticClass:"field",attrs:{label:"Study ID"}},[n("b-input",{attrs:{type:"number",value:e.model.id},on:{input:e.setModel}})],1),n("b-field",{staticClass:"field",attrs:{label:"Source"}},[n("b-input",{attrs:{value:e.model.source},on:{input:e.setSource}})],1)],1)])},wt=[],_t=n("8533"),Ot=xe({components:{Card:q},props:{model:{type:Object,required:!0}},setup:function(e,t){var n=Object(_t["e"])(""),r=function(){t.emit("cancel")},o=function(){t.emit("delete"),r()},i=function(t){me(e.model,"id",""===t?void 0:+t)},a=function(t){me(e.model,"source",t)},c=function(){t.emit("save"),r()};return{deleteModel:o,setModel:i,searchModel:n,setSource:a,cancel:r,save:c}}}),jt=Ot,Ct=(n("38a8"),Object(A["a"])(jt,kt,wt,!1,null,"6ba0c8e9",null)),Nt=Ct.exports,St=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("card",{attrs:{title:e.title,closeable:""},on:{close:function(t){return e.$emit("close")}},scopedSlots:e._u([{key:"footer",fn:function(){return[n("a",{staticClass:"card-footer-item",on:{click:function(t){return e.$emit("close")}}},[e._v("Cancel")]),n("a",{staticClass:"card-footer-item",on:{click:function(t){return e.$emit("delete")}}},[e._v("Delete")])]},proxy:!0}])},[n("b-field",[n("b-select",{attrs:{value:e.value,expanded:""},on:{input:function(t){return e.$emit("input",t)}}},e._l(e.options,function(t){return n("option",{key:t,domProps:{value:t}},[e._v(e._s(t))])}),0)],1)],1)},It=[],Rt=function(e){function t(){return Object(p["a"])(this,t),Object(h["a"])(this,Object(y["a"])(t).apply(this,arguments))}return Object(v["a"])(t,e),t}(E["c"]);b["__decorate"]([Object(E["b"])({type:Array,required:!0})],Rt.prototype,"options",void 0),b["__decorate"]([Object(E["b"])({type:String,required:!0})],Rt.prototype,"value",void 0),b["__decorate"]([Object(E["b"])({type:String,required:!0})],Rt.prototype,"title",void 0),Rt=b["__decorate"]([Object(E["a"])({components:{Card:q}})],Rt);var Lt=Rt,Mt=Lt,Et=Object(A["a"])(Mt,St,It,!1,null,"d8d3e3da",null),$t=Et.exports,Tt=n("bd86"),Dt={id:pe(),studyId:1,name:"Wx_7",type:"wet-lab-data",information:[["Cell line","Xenopus egg extract"]]},Gt={id:pe(),studyId:1,name:"W1_1",type:"wet-lab-data",information:[["Cell line","Xenopus egg extract"]]},At={id:pe(),studyId:1,name:"W1_2",type:"wet-lab-data",information:[["Cell line","Xenopus egg extract"]]},Pt={id:pe(),studyId:1,type:"model-building-activity",connections:[{id:pe(),targetId:Dt.id,type:"used-for-calibration"},{id:pe(),targetId:Gt.id,type:"used-for-calibration"},{id:pe(),targetId:At.id,type:"used-for-validation"}]},qt=(pe(),pe(),Pt.id,{id:pe(),studyId:1,type:"model",version:1,connections:[{id:pe(),targetId:Pt.id,type:"generated-by"}]}),Ht={id:pe(),studyId:1,type:"model-exploration-activity",connections:[{id:pe(),targetId:qt.id,type:"used"}]},zt={id:pe(),studyId:1,type:"simulation-data",name:"S1_2",connections:[{id:pe(),targetId:Ht.id,type:"generated-by"}]},Wt={id:pe(),studyId:12,name:"W12_1",type:"wet-lab-data",information:[["Cell line","hNPCs"]]},Bt={id:pe(),studyId:12,name:"Wx_1",type:"wet-lab-data",information:[["Cell line","HEK293T"]]},Ft={id:pe(),studyId:12,name:"Wx_2",type:"wet-lab-data",information:[["Cell line","Diverse cell lines (L, HIH3T3, N1E-115, nHPC, BHK, PTK2)"]]},Kt={id:pe(),studyId:12,type:"model-building-activity",connections:[{id:pe(),targetId:Wt.id,type:"used-for-calibration"},{id:pe(),targetId:Ft.id,type:"used-for-calibration"},{id:pe(),targetId:Bt.id,type:"used-for-calibration"},{id:pe(),targetId:zt.id,type:"used-for-validation"}]},Ut=(pe(),pe(),Kt.id,{id:pe(),studyId:12,type:"model",version:1,connections:[{id:pe(),targetId:Kt.id,type:"generated-by"}]}),Xt={id:pe(),studyId:12,name:"W12_2",type:"wet-lab-data",information:[["Cell line","hNPCs"]]},Jt={id:pe(),studyId:12,name:"W12_3",type:"wet-lab-data",information:[["Cell line","Diverse cell lines (L, HIH3T3, N1E-115, nHPC, BHK, PTK2)"]]},Vt={id:pe(),studyId:12,name:"Wx_3",type:"wet-lab-data",information:[["Cell line","hNPCs"]]},Zt={id:pe(),studyId:12,type:"model-building-activity",connections:[{id:pe(),targetId:Vt.id,type:"used-for-calibration"},{id:pe(),targetId:Xt.id,type:"used-for-validation"},{id:pe(),targetId:Jt.id,type:"used-for-validation"},{id:pe(),targetId:Ut.id,type:"used"}]},Yt=(pe(),pe(),Zt.id,pe(),pe(),Zt.id,n("59ca")),Qt=n.n(Yt),en=null,tn=function(e){return en||(en=Qt.a.database()),en.ref(e)},nn=function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t();case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e["catch"](0),e.abrupt("return",{result:"error",message:e.t0.message});case 9:case"end":return e.stop()}},e,null,[[0,6]])}));return function(t){return e.apply(this,arguments)}}();function rn(e){return on.apply(this,arguments)}function on(){return on=Object(u["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",nn(Object(u["a"])(regeneratorRuntime.mark(function e(){var n,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,tn(t).once("value");case 2:if(n=e.sent,n.exists()){e.next=5;break}return e.abrupt("return",{result:"success",items:[]});case 5:return r=n.val(),e.abrupt("return",{result:"success",items:Object.values(r)});case 7:case"end":return e.stop()}},e)}))));case 1:case"end":return e.stop()}},e)})),on.apply(this,arguments)}var an=function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,rn("nodes");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),cn=function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,rn("models");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),sn=function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,nn(Object(u["a"])(regeneratorRuntime.mark(function e(){var r,o,i,a,c,s,u,d;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=tn(n.ref).child(t),e.next=3,r.once("value");case 3:if(o=e.sent,o.exists()){e.next=9;break}console.info("Creating ".concat(t)),r.set(n.data),e.next=42;break;case 9:console.info("Updating ".concat(t," using: ").concat(n.keys)),i=!0,a=!1,c=void 0,e.prev=13,s=(n.keys||[])[Symbol.iterator]();case 15:if(i=(u=s.next()).done){e.next=28;break}if(d=u.value,d=d,void 0!==n.data[d]){e.next=22;break}r.child(d).remove(),e.next=25;break;case 22:return console.info("Setting ".concat(d," -> ").concat(n.data[d])),e.next=25,r.update(Object(Tt["a"])({},d,n.data[d]));case 25:i=!0,e.next=15;break;case 28:e.next=34;break;case 30:e.prev=30,e.t0=e["catch"](13),a=!0,c=e.t0;case 34:e.prev=34,e.prev=35,i||null==s.return||s.return();case 37:if(e.prev=37,!a){e.next=40;break}throw c;case 40:return e.finish(37);case 41:return e.finish(34);case 42:return e.abrupt("return",{result:"success"});case 43:case"end":return e.stop()}},e,null,[[13,30,34,42],[35,,37,41]])})));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),un=function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,sn(""+t.id,{ref:"models",data:t,keys:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),dn=function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,sn(t.id,{ref:"nodes",data:t,keys:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),ln=function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,nn(Object(u["a"])(regeneratorRuntime.mark(function e(){var r,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=tn(t).child(n),e.next=3,r.once("value");case 3:if(o=e.sent,o.exists()){e.next=6;break}return e.abrupt("return",{result:"not-found"});case 6:return console.info("Deleting ".concat(n)),r.remove(),e.abrupt("return",{result:"success"});case 9:case"end":return e.stop()}},e)})));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),pn=function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ln("nodes",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),fn=function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ln("models",""+t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),hn=n("f7fe"),yn=n.n(hn),vn=function(e){return!e.isGroup},bn=function(e){function t(){var e;return Object(p["a"])(this,t),e=Object(h["a"])(this,Object(y["a"])(t).apply(this,arguments)),e.provenanceNodes=[],e.expanded={},e.nodes=[],e.links=[],e.legendProps={nodeOutline:m,nodeRadius:O},e.nodesToShow={},e.pointToPlaceNode={x:0,y:0},e.lineStart=null,e.lineEnd=null,e.selectedConnection=null,e.currentRelationship=null,e.possibleRelationships=null,e.selectedNode=null,e.cachedConnections={},e.nodeFields=ye,e.models=[],e.showHelp=!1,e.selectedModel=null,e.savedGroupIds={},e.debouncedRenderGraph=yn()(e.renderGraph,500),e}return Object(v["a"])(t,e),Object(f["a"])(t,[{key:"openHelp",value:function(){this.showHelp=!0}},{key:"showProvenanceGraph",value:function(e){var t=this,n=function e(n){t.nodesToShow[n]=!0;var r=t.highLevelNodeLookup[n];void 0!==r.node.studyId&&(t.expanded[r.node.studyId]=!0),r.outgoing.forEach(function(t){e(t.target.id)})};n(e.id),this.renderGraph()}},{key:"cancelSelectedModel",value:function(){this.selectedModel=null}},{key:"saveSelectedModel",value:function(){if(this.selectedModel){var e=this.selectedModel;ke(function(){return un(e,["id","source","signalingPathway"])})}}},{key:"deleteSelectedModel",value:function(){if(this.selectedModel){var e=this.selectedModel;ke(function(){return fn(e.id)})}}},{key:"openModel",value:function(e){if(void 0===e.studyId)return this.$notification.open({message:"Please assign a model first."}),void this.$notification.open({message:"Please assign a model first.",position:"is-bottom-right",type:"is-warning"});this.selectedModel=this.modelInformationLookup[e.studyId]}},{key:"clearNodes",value:function(){this.nodesToShow={},this.renderGraph()}},{key:"openResult",value:function(e){var t=this;void 0!==e.studyId&&(this.expanded[e.studyId]=!0),this.highLevelNodes.forEach(function(n){var r=n.node,o=n.id;r.studyId===e.studyId&&(t.nodesToShow[o]=!0)}),this.renderGraph()}},{key:"addModel",value:function(){this.selectedModel={id:0,source:""}}},{key:"nodeRightClick",value:function(e,t){var n=this;e.preventDefault();var r=function(){n.lineStart={x:t.x+t.width/2,y:t.y+t.height/2}};this.$refs.d3.setStrokeColor(t,k);var o=function(e){return n.nodes.filter(vn).filter(function(n){var r=n,o={x:n.x+n.width,y:n.y+n.height};return n!==t&&e.x>r.x&&e.y>r.y&&o.x>e.x&&o.y>e.y})},i=function(e,t){var r=n.cachedConnections[e.type];r||(r=n.cachedConnections[e.type]={});var o=r[t.type];return o||(o=r[t.type]=le(e.type,t.type)),o},a=null,c=de({mousemove:function(e){n.lineEnd=e,r();var c=o(e);if(a&&(n.$refs.d3.setStrokeColor(a,m),a=null),0!==c.length){var s=a=c[c.length-1],u=t.provenanceNode,d=s.provenanceNode,l=i(u,d),p=ue(u,d,l),f=p?k:w;n.$refs.d3.setStrokeColor(a,f)}},mouseup:function(e){if(3===e.which){c(),n.lineStart=null,n.lineEnd=null,n.$refs.d3.setStrokeColor(t,m),a&&n.$refs.d3.setStrokeColor(a,m);var r=o(e);if(0!==r.length){var s=r[r.length-1],u=t.provenanceNode,d=s.provenanceNode,l=i(u,d),p=se(u,d,{type:l});p&&(ke(function(){return dn(u,["connections"])}),n.renderGraph())}}}})}},{key:"hullDblclick",value:function(e){this.expanded[e.group]=!1;var t={x:0,y:0};e.nodes.forEach(function(e){t.x+=e.x,t.y+=e.y}),t.x/=e.nodes.length,t.y/=e.nodes.length,this.pointToPlaceNode=t,this.renderGraph()}},{key:"createNewNode",value:function(e){var t=this,n=e.id,r=this.highLevelNodeLookup[n].incoming.some(function(e){return!t.nodesToShow[e.source.id]}),o=ce(e,this.modelInformationLookup),i=this.nodeLookup[n]?this.nodeLookup[n]:this.pointToPlaceNode,a=i.x,c=i.y,s="wet-lab-data"===e.type||"simulation-data"===e.type||"model"===e.type,u={isGroup:!1,id:n,text:o,actionText:r?"See more":void 0,type:e.type,model:e.studyId,hullGroup:e.studyId,stroke:m,x:a,y:c,vx:0,vy:0,index:0,provenanceNode:e,rx:s?10:0,width:8*o.length+10,height:_,onDidRightClick:function(e){t.nodeRightClick(e,u)},onDidClick:function(){if(t.$refs.d3.setStrokeColor(u,x),t.selectedNode){var n=t.nodeLookup[t.selectedNode.id];n&&!n.isGroup&&t.$refs.d3.setStrokeColor(n,m)}t.selectedNode===e?t.selectedNode=null:t.selectedNode=e},onDidActionClick:function(){var e=new Set,n=function n(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"incoming";e.add(r);var i="outgoing"===o?"target":"source";t.highLevelNodeLookup[r][o].forEach(function(r){if(!e.has(r[i].id)){var o=r[i].node.studyId;void 0!==o&&(t.expanded[o]=!0),t.nodesToShow[r[i].id]=!0,n(r[i].id,"outgoing")}})};n(u.id),t.pointToPlaceNode=u,t.renderGraph()}};return u}},{key:"renderGraph",value:function(){var e=this,t=[],n=[],r={},o=this.provenanceNodes.filter(function(t){return e.nodesToShow[t.id]});o.forEach(function(t){if(void 0!==t.studyId&&!e.expanded[t.studyId]&&!r[t.studyId]){var o=t.studyId,i=e.savedGroupIds[t.studyId]=ge(e.savedGroupIds,t.studyId,pe()),a=e.nodeLookup[i]?e.nodeLookup[i]:e.pointToPlaceNode,c=Object(l["a"])({},a,{isGroup:!0,model:o,id:i,index:0,vx:0,vy:0,stroke:j,rx:0,text:"M".concat(t.studyId),width:C,height:_,onDidDblclick:function(){e.expanded[o]=!0,e.pointToPlaceNode=c,e.renderGraph()}});r[t.studyId]=c,n.push(c)}}),o.forEach(function(o){var i=o.id,a=e.highLevelNodeLookup[i];a.outgoing.forEach(function(n){var o=n.target.id;if(e.nodesToShow[o]){var a=function(t,n){return void 0===n||e.expanded[n]?t:r[n].id},c=a(i,n.source.node.studyId),s=a(o,n.target.node.studyId);if(s!==c){var u={source:c,target:s,color:n.color,onDidClick:function(){if(e.selectedConnection!==n){e.selectedConnection=n;var t=n.source.node,r=n.target.node,o=S[t.type];if(o){var i=o[r.type];i&&(e.currentRelationship=n.relationship,e.possibleRelationships=i.map(function(e){return"string"===typeof e?e:e.relationship}))}}else e.cancelRelationshipSelection()}};t.push(u)}}}),(void 0===o.studyId||e.expanded[o.studyId])&&n.push(e.createNewNode(o))}),this.pointToPlaceNode={x:0,y:0},this.nodes=n,this.links=t}},{key:"addNode",value:function(){var e={type:"model-building-activity",id:pe()};this.provenanceNodes.push(e),this.selectedNode=e,ke(function(){return dn(e)}),this.nodesToShow[e.id]=!0,void 0!==e.studyId&&(this.expanded[e.studyId]=!0),this.renderGraph()}},{key:"cancelRelationshipSelection",value:function(){this.selectedConnection=null,this.currentRelationship=null,this.possibleRelationships=null}},{key:"changeRelationship",value:function(e){if(this.selectedConnection){var t=this.selectedConnection.original,n=this.selectedConnection.source.node,r=this.selectedConnection.target.node,o=this.cachedConnections[n.type]=this.cachedConnections[n.type]||{};o[r.type]=e,this.currentRelationship=e,t.type=e,this.renderGraph(),this.cancelRelationshipSelection(),ke(function(){return dn(n,["connections"])})}}},{key:"deleteRelationship",value:function(){if(this.selectedConnection){var e=this.selectedConnection,t=this.selectedConnection.source;t.node.connections&&(t.node.connections=t.node.connections.filter(function(t){return t.id!==e.original.id}),this.renderGraph(),this.cancelRelationshipSelection(),ke(function(){return dn(t.node,["connections"])}))}}},{key:"deselectNode",value:function(){this.selectedNode=null}},{key:"deleteNode",value:function(){if(this.selectedNode){var e=this.selectedNode,t=this.highLevelNodeLookup[e.id].incoming;t.forEach(function(t){var n=t.source;n.node.connections&&(n.node.connections=n.node.connections.filter(function(t){var n=t.targetId;return e.id!==n}))}),this.provenanceNodes=this.provenanceNodes.filter(function(t){return t.id!==e.id}),ke(function(){return pn(e.id)}),t.forEach(function(e){var t=e.source;dn(t.node,["connections"])}),this.selectedNode=null,this.renderGraph()}}},{key:"onNodeChange",value:function(e,t){var n=this;this.nodes.forEach(function(t){if(t.id===e.id&&!t.isGroup){var r=ce(e,n.modelInformationLookup);if(r!==t.text){var o=n.createNewNode(e);n.$refs.d3.replaceNode(o)}}});var r=this.highLevelNodeLookup[e.id],o=r.outgoing,i=r.incoming,a=[],c=function(e,t){e.includes(t)||e.push(t)};[].concat(Object(d["a"])(i),Object(d["a"])(o)).forEach(function(e){var t=e.source,n=e.target,r=e.relationship;ue(t.node,n.node,r)||(c(a,t.node),c(a,n.node),t.node.connections&&(t.node.connections=t.node.connections.filter(function(e){return e.targetId!==n.node.id})))}),ke(function(){return dn(e,[t])}),a.map(function(t){ke(function(){return dn(e,["connections"])})}),this.debouncedRenderGraph()}},{key:"mounted",value:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:ke(cn,function(e){t.models=e.items}),ke(an,function(e){t.provenanceNodes=e.items});case 2:case"end":return e.stop()}},e)}));function t(){return e.apply(this,arguments)}return t}()},{key:"height",get:function(){return this.windowHeight-7}},{key:"width",get:function(){return this.windowWidth}},{key:"nodeLookup",get:function(){return ie(this.nodes)}},{key:"highLevelNodes",get:function(){var e=this,t={};this.provenanceNodes.forEach(function(e){t[e.id]={id:e.id,node:e,incoming:[],outgoing:[]}});this.provenanceNodes.map(function(n){var r=n.id,o=t[r];n.connections&&n.connections.forEach(function(i){var a=i.targetId,c=t[a];if(c){var s={id:i.id,relationship:i.type,original:i,color:g[i.type].color,source:o,target:c};o.outgoing.push(s),c.incoming.push(s)}else e.$notification.open({duration:1e4,message:"Connection target not found: ".concat(n.type,"(").concat(r,") => ").concat(a),position:"is-bottom-right",type:"is-warning"})})});return Object.values(t)}},{key:"highLevelNodeLookup",get:function(){return ie(this.highLevelNodes)}},{key:"modelInformationLookup",get:function(){return ie(this.models)}},{key:"searchItems",get:function(){var e=this;return this.provenanceNodes.map(function(t){var n="wet-lab-data"===t.type&&t.information?t.information.map(function(e){var t=Object(s["a"])(e,2),n=(t[0],t[1]);return n}):[];return{id:t.id,title:ce(t,e.modelInformationLookup),type:t.type,studyId:t.studyId,model:void 0!==t.studyId?"Model ".concat(t.studyId):void 0,information:n}})}}]),t}(E["c"]);b["__decorate"]([Object(E["b"])({type:Number,required:!0})],bn.prototype,"windowHeight",void 0),b["__decorate"]([Object(E["b"])({type:Number,required:!0})],bn.prototype,"windowWidth",void 0),bn=b["__decorate"]([Object(E["a"])({components:{ProvLegend:Ve,D3:Re,Search:ft,CardSelect:$t,FormCard:xt,ModelsCard:Nt,InformationModal:nt}})],bn);var gn=bn,mn=gn,xn=(n("9893"),Object(A["a"])(mn,a,c,!1,null,"0b808305",null)),kn=xn.exports;function wn(){var e=Object(_t["e"])(window.innerWidth),t=Object(_t["e"])(window.innerHeight),n=function(){e.value=window.innerWidth,t.value=window.innerHeight};return Object(_t["b"])(function(){window.addEventListener("resize",n)}),Object(_t["c"])(function(){window.removeEventListener("resize",n)}),{windowWidth:e,windowHeight:t}}var _n=Object(_t["a"])({components:{Visualizer:kn},setup:function(e){return wn()}}),On=_n,jn=(n("5c0b"),Object(A["a"])(On,o,i,!1,null,null,null)),Cn=jn.exports,Nn=n("8a03"),Sn=n.n(Nn);n("5abe"),n("66ce");r["default"].config.productionTip=!1,r["default"].use(_t["d"]),r["default"].use(Sn.a),Qt.a.initializeApp({apiKey:"AIzaSyCKa8xz75zv_UMdq3lNa36JtpqOGRMS5EA",authDomain:"web-provenance.firebaseapp.com",databaseURL:"https://web-provenance.firebaseio.com",projectId:"web-provenance",storageBucket:"",messagingSenderId:"661014668557",appId:"1:661014668557:web:595398a33864e4ff"}),new r["default"]({render:function(e){return e(Cn)}}).$mount("#app")},eb9d:function(e,t,n){"use strict";var r=n("021e"),o=n.n(r);o.a},ffad:function(e,t,n){}});
//# sourceMappingURL=app.62d85a92.js.map